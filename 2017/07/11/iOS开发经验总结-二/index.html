<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>iOS开发经验总结(二) - 任征的个人博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="任征"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="任征"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="1、设置UILabel行间距1234567NSMutableAttributedString* attrString &amp;#x3D; [[NSMutableAttributedString  alloc] initWithString:label.text];    NSMutableParagraphStyle *style &amp;#x3D; [[NSMutableParagraphStyle alloc] init];"><meta property="og:type" content="blog"><meta property="og:title" content="iOS开发经验总结(二)"><meta property="og:url" content="https://rzrobert.github.io/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/"><meta property="og:site_name" content="任征的个人博客"><meta property="og:description" content="1、设置UILabel行间距1234567NSMutableAttributedString* attrString &amp;#x3D; [[NSMutableAttributedString  alloc] initWithString:label.text];    NSMutableParagraphStyle *style &amp;#x3D; [[NSMutableParagraphStyle alloc] init];"><meta property="og:image" content="https://rzrobert.github.io/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/label.gif"><meta property="article:published_time" content="2017-07-11T06:04:03.000Z"><meta property="article:modified_time" content="2023-12-18T11:45:48.297Z"><meta property="article:author" content="robert"><meta property="article:tag" content="总结"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://rzrobert.github.io/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/label.gif"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://rzrobert.github.io/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/"},"headline":"iOS开发经验总结(二)","image":["https://rzrobert.github.io/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/label.gif"],"datePublished":"2017-07-11T06:04:03.000Z","dateModified":"2023-12-18T11:45:48.297Z","author":{"@type":"Person","name":"robert"},"publisher":{"@type":"Organization","name":"任征的个人博客","logo":{"@type":"ImageObject"}},"description":"1、设置UILabel行间距1234567NSMutableAttributedString* attrString &#x3D; [[NSMutableAttributedString  alloc] initWithString:label.text];    NSMutableParagraphStyle *style &#x3D; [[NSMutableParagraphStyle alloc] init];"}</script><link rel="canonical" href="https://rzrobert.github.io/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">任征的个人博客</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/rzrobert"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Publié il y a&nbsp;<time dateTime="2017-07-11T06:04:03.000Z" title="2017/7/11 14:04:03">2017-07-11</time></span><span class="level-item">Mis à jour il y a&nbsp;<time dateTime="2023-12-18T11:45:48.297Z" title="2023/12/18 19:45:48">2023-12-18</time></span><span class="level-item"><a class="link-muted" href="/categories/iOS/">iOS</a></span><span class="level-item">an hour de lecture (Environ 6833 mots)</span></div></div><h1 class="title is-3 is-size-4-mobile">iOS开发经验总结(二)</h1><div class="content"><h3 id="1、设置UILabel行间距"><a href="#1、设置UILabel行间距" class="headerlink" title="1、设置UILabel行间距"></a>1、设置UILabel行间距</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NSMutableAttributedString* attrString = [[NSMutableAttributedString  alloc] initWithString:label.text];</span><br><span class="line">    NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];</span><br><span class="line">    [style setLineSpacing:20];</span><br><span class="line">    [attrString addAttribute:NSParagraphStyleAttributeName value:style range:NSMakeRange(0, label.text.length)];</span><br><span class="line">    label.attributedText = attrString;</span><br><span class="line">    </span><br><span class="line">    </span><br></pre></td></tr></table></figure>
<p>或者使用xib，看下gif图</p>
<p><img src="/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/label.gif"></p>
<h3 id="2、当使用-performSelector-withObject-withObject-afterDelay-方法时，需要传入多参数问题"><a href="#2、当使用-performSelector-withObject-withObject-afterDelay-方法时，需要传入多参数问题" class="headerlink" title="2、当使用-performSelector:withObject:withObject:afterDelay:方法时，需要传入多参数问题"></a>2、当使用-performSelector:withObject:withObject:afterDelay:方法时，需要传入多参数问题</h3><span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 方法一、</span><br><span class="line">// 把参数放进一个数组／字典，直接把数组／字典当成一个参数传过去，具体方法实现的地方再解析这个数组／字典</span><br><span class="line">NSArray * array = </span><br><span class="line">    [NSArray arrayWithObjects: @&quot;first&quot;, @&quot;second&quot;, nil];</span><br><span class="line">[self performSelector:@selector(fooFirstInput:) withObject: array afterDelay:15.0];</span><br><span class="line"></span><br><span class="line">// 方法二、</span><br><span class="line">// 使用NSInvocation</span><br><span class="line">SEL aSelector = NSSelectorFromString(@&quot;doSoming:argument2:&quot;);</span><br><span class="line">    NSInteger argument1 = 10;</span><br><span class="line">    NSString *argument2 = @&quot;argument2&quot;;</span><br><span class="line">    if([self respondsToSelector:aSelector]) &#123;</span><br><span class="line">        NSInvocation *inv = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:aSelector]];</span><br><span class="line">        [inv setSelector:aSelector];</span><br><span class="line">        [inv setTarget:self];</span><br><span class="line">        [inv setArgument:&amp;(argument1) atIndex:2];</span><br><span class="line">        [inv setArgument:&amp;(argument2) atIndex:3];</span><br><span class="line">        [inv performSelector:@selector(invoke) withObject:nil afterDelay:15.0];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3、UILabel显示不同颜色字体"><a href="#3、UILabel显示不同颜色字体" class="headerlink" title="3、UILabel显示不同颜色字体"></a>3、UILabel显示不同颜色字体</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithString:label.text];</span><br><span class="line">[string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0,5)];</span><br><span class="line">[string addAttribute:NSForegroundColorAttributeName value:[UIColor greenColor] range:NSMakeRange(5,6)];</span><br><span class="line">[string addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:NSMakeRange(11,5)];</span><br><span class="line">label.attributedText = string;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4、比较两个CGRect-CGSize-CGPoint是否相等"><a href="#4、比较两个CGRect-CGSize-CGPoint是否相等" class="headerlink" title="4、比较两个CGRect&#x2F;CGSize&#x2F;CGPoint是否相等"></a>4、比较两个CGRect&#x2F;CGSize&#x2F;CGPoint是否相等</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">if (CGRectEqualToRect(rect1, rect2)) &#123; // 两个区域相等</span><br><span class="line">        // do some</span><br><span class="line">    &#125;</span><br><span class="line">    if (CGPointEqualToPoint(point1, point2)) &#123; // 两个点相等</span><br><span class="line">        // do some</span><br><span class="line">    &#125;</span><br><span class="line">    if (CGSizeEqualToSize(size1, size2)) &#123; // 两个size相等</span><br><span class="line">        // do some</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5、比较两个NSDate相差多少小时"><a href="#5、比较两个NSDate相差多少小时" class="headerlink" title="5、比较两个NSDate相差多少小时"></a>5、比较两个NSDate相差多少小时</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> NSDate* date1 = someDate;</span><br><span class="line"> NSDate* date2 = someOtherDate;</span><br><span class="line"> NSTimeInterval distanceBetweenDates = [date1 timeIntervalSinceDate:date2];</span><br><span class="line"> double secondsInAnHour = 3600;</span><br><span class="line">// 除以3600是把秒化成小时，除以60得到结果为相差的分钟数</span><br><span class="line"> NSInteger hoursBetweenDates = distanceBetweenDates / secondsInAnHour;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6、每个cell之间增加间距"><a href="#6、每个cell之间增加间距" class="headerlink" title="6、每个cell之间增加间距"></a>6、每个cell之间增加间距</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 方法一，每个分区只显示一行cell，分区头当作你想要的间距(注意，从数据源数组中取值的时候需要用indexPath.section而不是indexPath.row)</span><br><span class="line">- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView</span><br><span class="line">&#123;</span><br><span class="line">    return yourArry.count;</span><br><span class="line">&#125;</span><br><span class="line">- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section</span><br><span class="line">&#123;</span><br><span class="line">    return 1;</span><br><span class="line">&#125;</span><br><span class="line">-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section</span><br><span class="line">&#123;</span><br><span class="line">    return cellSpacingHeight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 方法二，在cell的contentView上加个稍微低一点的view，cell上原本的内容放在你的view上，而不是contentView上，这样能伪造出一个间距来。</span><br><span class="line"></span><br><span class="line">// 方法三，自定义cell，重写setFrame：方法</span><br><span class="line">- (void)setFrame:(CGRect)frame</span><br><span class="line">&#123;</span><br><span class="line">    frame.size.height -= 20;</span><br><span class="line">    [super setFrame:frame];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="7、播放一张张连续的图片"><a href="#7、播放一张张连续的图片" class="headerlink" title="7、播放一张张连续的图片"></a>7、播放一张张连续的图片</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 加入现在有三张图片分别为animate_1、animate_2、animate_3</span><br><span class="line">// 方法一</span><br><span class="line">    imageView.animationImages = @[[UIImage imageNamed:@&quot;animate_1&quot;], [UIImage imageNamed:@&quot;animate_2&quot;], [UIImage imageNamed:@&quot;animate_3&quot;]];</span><br><span class="line">imageView.animationDuration = 1.0;</span><br><span class="line">// 方法二</span><br><span class="line">    imageView.image = [UIImage animatedImageNamed:@&quot;animate_&quot; duration:1.0];</span><br><span class="line">// 方法二解释下，这个方法会加载animate_为前缀的，后边0-1024，也就是animate_0、animate_1一直到animate_1024</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="8、加载gif图片"><a href="#8、加载gif图片" class="headerlink" title="8、加载gif图片"></a>8、加载gif图片</h3><p><strong>推荐使用这个框架 FLAnimatedImage</strong></p>
<h3 id="9、防止离屏渲染为image添加圆角"><a href="#9、防止离屏渲染为image添加圆角" class="headerlink" title="9、防止离屏渲染为image添加圆角"></a>9、防止离屏渲染为image添加圆角</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// image分类</span><br><span class="line">- (UIImage *)circleImage</span><br><span class="line">&#123;</span><br><span class="line">// NO代表透明</span><br><span class="line">UIGraphicsBeginImageContextWithOptions(self.size, NO, 1);</span><br><span class="line">// 获得上下文</span><br><span class="line">CGContextRef ctx = UIGraphicsGetCurrentContext();</span><br><span class="line">// 添加一个圆</span><br><span class="line">CGRect rect = CGRectMake(0, 0, self.size.width, self.size.height);</span><br><span class="line">// 方形变圆形</span><br><span class="line">CGContextAddEllipseInRect(ctx, rect);</span><br><span class="line">// 裁剪</span><br><span class="line">CGContextClip(ctx);</span><br><span class="line">// 将图片画上去</span><br><span class="line">[self drawInRect:rect];</span><br><span class="line">UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">UIGraphicsEndImageContext();</span><br><span class="line">return image;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="10、查看系统所有字体"><a href="#10、查看系统所有字体" class="headerlink" title="10、查看系统所有字体"></a>10、查看系统所有字体</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 打印字体</span><br><span class="line">for (id familyName in [UIFont familyNames]) &#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;, familyName);</span><br><span class="line">    for (id fontName in [UIFont fontNamesForFamilyName:familyName]) NSLog(@&quot;  %@&quot;, fontName);</span><br><span class="line">&#125;</span><br><span class="line">// 也可以进入这个网址查看 http://iosfonts.com/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="11、获取随机数"><a href="#11、获取随机数" class="headerlink" title="11、获取随机数"></a>11、获取随机数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NSInteger i = arc4random();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="12、获取随机数小数-0-1之间"><a href="#12、获取随机数小数-0-1之间" class="headerlink" title="12、获取随机数小数(0-1之间)"></a>12、获取随机数小数(0-1之间)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#define ARC4RANDOM_MAX      0x100000000</span><br><span class="line">double val = ((double)arc4random() / ARC4RANDOM_MAX);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="13、AVPlayer视频播放完成的通知监听"><a href="#13、AVPlayer视频播放完成的通知监听" class="headerlink" title="13、AVPlayer视频播放完成的通知监听"></a>13、AVPlayer视频播放完成的通知监听</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[[NSNotificationCenter defaultCenter] </span><br><span class="line">      addObserver:self</span><br><span class="line">      selector:@selector(videoPlayEnd)</span><br><span class="line">      name:AVPlayerItemDidPlayToEndTimeNotification </span><br><span class="line">      object:nil];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="14、判断两个rect是否有交叉"><a href="#14、判断两个rect是否有交叉" class="headerlink" title="14、判断两个rect是否有交叉"></a>14、判断两个rect是否有交叉</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> if (CGRectIntersectsRect(rect1, rect2)) &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="15、判断一个字符串是否为数字"><a href="#15、判断一个字符串是否为数字" class="headerlink" title="15、判断一个字符串是否为数字"></a>15、判断一个字符串是否为数字</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">NSCharacterSet *notDigits = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];</span><br><span class="line">    if ([str rangeOfCharacterFromSet:notDigits].location == NSNotFound)</span><br><span class="line">    &#123;</span><br><span class="line">      // 是数字</span><br><span class="line">    &#125; else</span><br><span class="line">    &#123;</span><br><span class="line">      // 不是数字</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="16、将一个view保存为pdf格式"><a href="#16、将一个view保存为pdf格式" class="headerlink" title="16、将一个view保存为pdf格式"></a>16、将一个view保存为pdf格式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (void)createPDFfromUIView:(UIView*)aView saveToDocumentsWithFileName:(NSString*)aFilename</span><br><span class="line">&#123;</span><br><span class="line">    NSMutableData *pdfData = [NSMutableData data];</span><br><span class="line">    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);</span><br><span class="line">    UIGraphicsBeginPDFPage();</span><br><span class="line">    CGContextRef pdfContext = UIGraphicsGetCurrentContext();</span><br><span class="line">    [aView.layer renderInContext:pdfContext];</span><br><span class="line">    UIGraphicsEndPDFContext();</span><br><span class="line"></span><br><span class="line">    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);</span><br><span class="line">    NSString* documentDirectory = [documentDirectories objectAtIndex:0];</span><br><span class="line">    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];</span><br><span class="line">    [pdfData writeToFile:documentDirectoryFilename atomically:YES];</span><br><span class="line">    NSLog(@&quot;documentDirectoryFileName: %@&quot;,documentDirectoryFilename);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="17、让一个view在父视图中心"><a href="#17、让一个view在父视图中心" class="headerlink" title="17、让一个view在父视图中心"></a>17、让一个view在父视图中心</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">child.center = [parent convertPoint:parent.center fromView:parent.superview];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="18、获取当前导航控制器下前一个控制器"><a href="#18、获取当前导航控制器下前一个控制器" class="headerlink" title="18、获取当前导航控制器下前一个控制器"></a>18、获取当前导航控制器下前一个控制器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (UIViewController *)backViewController</span><br><span class="line">&#123;</span><br><span class="line">    NSInteger myIndex = [self.navigationController.viewControllers indexOfObject:self];</span><br><span class="line"></span><br><span class="line">    if ( myIndex != 0 &amp;&amp; myIndex != NSNotFound ) &#123;</span><br><span class="line">        return [self.navigationController.viewControllers objectAtIndex:myIndex-1];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="19、保存UIImage到本地"><a href="#19、保存UIImage到本地" class="headerlink" title="19、保存UIImage到本地"></a>19、保存UIImage到本地</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);</span><br><span class="line">NSString *filePath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@&quot;Image.png&quot;];</span><br><span class="line"></span><br><span class="line">[UIImagePNGRepresentation(image) writeToFile:filePath atomically:YES];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="20、键盘上方增加工具栏"><a href="#20、键盘上方增加工具栏" class="headerlink" title="20、键盘上方增加工具栏"></a>20、键盘上方增加工具栏</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">UIToolbar *keyboardDoneButtonView = [[UIToolbar alloc] init];</span><br><span class="line">[keyboardDoneButtonView sizeToFit];</span><br><span class="line">UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle:@&quot;Done&quot;</span><br><span class="line">                                                               style:UIBarButtonItemStyleBordered target:self</span><br><span class="line">                                                              action:@selector(doneClicked:)];</span><br><span class="line">[keyboardDoneButtonView setItems:[NSArray arrayWithObjects:doneButton, nil]];</span><br><span class="line">txtField.inputAccessoryView = keyboardDoneButtonView;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="21、copy一个view"><a href="#21、copy一个view" class="headerlink" title="21、copy一个view"></a>21、copy一个view</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">因为UIView没有实现copy协议，因此找不到copyWithZone方法，使用copy的时候导致崩溃</span><br><span class="line">但是我们可以通过归档再解档实现copy，这相当于对视图进行了一次深拷贝，代码如下</span><br><span class="line">id copyOfView = </span><br><span class="line">[NSKeyedUnarchiver unarchiveObjectWithData:[NSKeyedArchiver archivedDataWithRootObject:originalView]];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="22、在image上绘制文字并生成新的image"><a href="#22、在image上绘制文字并生成新的image" class="headerlink" title="22、在image上绘制文字并生成新的image"></a>22、在image上绘制文字并生成新的image</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UIFont *font = [UIFont boldSystemFontOfSize:12];</span><br><span class="line">    UIGraphicsBeginImageContext(image.size);</span><br><span class="line">    [image drawInRect:CGRectMake(0,0,image.size.width,image.size.height)];</span><br><span class="line">    CGRect rect = CGRectMake(point.x, point.y, image.size.width, image.size.height);</span><br><span class="line">    [[UIColor whiteColor] set];</span><br><span class="line">    [text drawInRect:CGRectIntegral(rect) withFont:font]; </span><br><span class="line">    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="23、判断一个view是否为另一个view的子视图"><a href="#23、判断一个view是否为另一个view的子视图" class="headerlink" title="23、判断一个view是否为另一个view的子视图"></a>23、判断一个view是否为另一个view的子视图</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 如果myView是self.view本身，也会返回yes</span><br><span class="line">BOOL isSubView = [myView isDescendantOfView:self.view];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="24、判断一个字符串是否包含另一个字符串"><a href="#24、判断一个字符串是否包含另一个字符串" class="headerlink" title="24、判断一个字符串是否包含另一个字符串"></a>24、判断一个字符串是否包含另一个字符串</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 方法一、这种方法只适用于iOS8之后，如果是配iOS8之前用方法二</span><br><span class="line">if ([str containsString:otherStr]) NSLog(@&quot;包含&quot;);</span><br><span class="line"></span><br><span class="line">// 方法二</span><br><span class="line">NSRange range = [str rangeOfString:otherStr];</span><br><span class="line">if (range.location != NSNotFound) NSLog(@&quot;包含&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="25、UICollectionView自动滚动到某行"><a href="#25、UICollectionView自动滚动到某行" class="headerlink" title="25、UICollectionView自动滚动到某行"></a>25、UICollectionView自动滚动到某行</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 重写viewDidLayoutSubviews方法</span><br><span class="line">-(void)viewDidLayoutSubviews &#123;</span><br><span class="line">   [super viewDidLayoutSubviews];</span><br><span class="line">   [self.collectionView scrollToItemAtIndexPath:indexPath atScrollPosition:UICollectionViewScrollPositionCenteredVertically animated:NO];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="26、修改系统UIAlertController"><a href="#26、修改系统UIAlertController" class="headerlink" title="26、修改系统UIAlertController"></a>26、修改系统UIAlertController</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 但是据说这种方法会被App Store拒绝(慎用！)</span><br><span class="line">UIAlertController *alertVC = [UIAlertController alertControllerWithTitle:@&quot;&quot; message:@&quot;&quot; preferredStyle:UIAlertControllerStyleActionSheet];</span><br><span class="line">    NSMutableAttributedString *hogan = [[NSMutableAttributedString alloc] initWithString:@&quot;我是一个大文本&quot;];</span><br><span class="line">    [hogan addAttribute:NSFontAttributeName</span><br><span class="line">                  value:[UIFont systemFontOfSize:30]</span><br><span class="line">                  range:NSMakeRange(4, 1)];</span><br><span class="line">    [hogan addAttribute:NSForegroundColorAttributeName</span><br><span class="line">                  value:[UIColor redColor]</span><br><span class="line">                  range:NSMakeRange(4, 1)];</span><br><span class="line">    [alertVC setValue:hogan forKey:@&quot;attributedTitle&quot;];</span><br><span class="line"></span><br><span class="line">    UIAlertAction *button = [UIAlertAction actionWithTitle:@&quot;Label text&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction *action)&#123; &#125;];</span><br><span class="line">    UIImage *accessoryImage = [UIImage imageNamed:@&quot;1&quot;];</span><br><span class="line">    [button setValue:accessoryImage forKey:@&quot;image&quot;];</span><br><span class="line">    [alertVC addAction:button];</span><br><span class="line">    [self presentViewController:alertVC animated:YES completion:nil];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="27、判断某一行的cell是否已经显示"><a href="#27、判断某一行的cell是否已经显示" class="headerlink" title="27、判断某一行的cell是否已经显示"></a>27、判断某一行的cell是否已经显示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CGRect cellRect = [tableView rectForRowAtIndexPath:indexPath];</span><br><span class="line">BOOL completelyVisible = CGRectContainsRect(tableView.bounds, cellRect);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="28、让导航控制器pop回指定的控制器"><a href="#28、让导航控制器pop回指定的控制器" class="headerlink" title="28、让导航控制器pop回指定的控制器"></a>28、让导航控制器pop回指定的控制器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NSMutableArray *allViewControllers = [NSMutableArray arrayWithArray:[self.navigationController viewControllers]];</span><br><span class="line">for (UIViewController *aViewController in allViewControllers) &#123;</span><br><span class="line">    if ([aViewController isKindOfClass:[RequiredViewController class]]) &#123;</span><br><span class="line">        [self.navigationController popToViewController:aViewController animated:NO];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="29、动画修改label上的文字"><a href="#29、动画修改label上的文字" class="headerlink" title="29、动画修改label上的文字"></a>29、动画修改label上的文字</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 方法一</span><br><span class="line">CATransition *animation = [CATransition animation];</span><br><span class="line">    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">    animation.type = kCATransitionFade;</span><br><span class="line">    animation.duration = 0.75;</span><br><span class="line">    [self.label.layer addAnimation:animation forKey:@&quot;kCATransitionFade&quot;];</span><br><span class="line">    self.label.text = @&quot;New&quot;;</span><br><span class="line"></span><br><span class="line">// 方法二</span><br><span class="line">[UIView transitionWithView:self.label</span><br><span class="line">                      duration:0.25f</span><br><span class="line">                       options:UIViewAnimationOptionTransitionCrossDissolve</span><br><span class="line">                    animations:^&#123;</span><br><span class="line"></span><br><span class="line">                        self.label.text = @&quot;Well done!&quot;;</span><br><span class="line"></span><br><span class="line">                    &#125; completion:nil];</span><br><span class="line"></span><br><span class="line">// 方法三</span><br><span class="line">[UIView animateWithDuration:1.0</span><br><span class="line">                     animations:^&#123;</span><br><span class="line">                         self.label.alpha = 0.0f;</span><br><span class="line">                         self.label.text = @&quot;newText&quot;;</span><br><span class="line">                         self.label.alpha = 1.0f;</span><br><span class="line">                     &#125;];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="30、判断字典中是否包含某个key值"><a href="#30、判断字典中是否包含某个key值" class="headerlink" title="30、判断字典中是否包含某个key值"></a>30、判断字典中是否包含某个key值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if ([dic objectForKey:@&quot;yourKey&quot;]) &#123;</span><br><span class="line">    NSLog(@&quot;有这个值&quot;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    NSLog(@&quot;没有这个值&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="31、获取屏幕方向"><a href="#31、获取屏幕方向" class="headerlink" title="31、获取屏幕方向"></a>31、获取屏幕方向</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;</span><br><span class="line"></span><br><span class="line">if(orientation == 0) //Default orientation </span><br><span class="line">    //默认</span><br><span class="line">else if(orientation == UIInterfaceOrientationPortrait)</span><br><span class="line">    //竖屏</span><br><span class="line">else if(orientation == UIInterfaceOrientationLandscapeLeft)</span><br><span class="line">    // 左横屏</span><br><span class="line">else if(orientation == UIInterfaceOrientationLandscapeRight)</span><br><span class="line">    //右横屏</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="32、设置UIImage的透明度"><a href="#32、设置UIImage的透明度" class="headerlink" title="32、设置UIImage的透明度"></a>32、设置UIImage的透明度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 方法一、添加UIImage分类</span><br><span class="line">- (UIImage *)imageByApplyingAlpha:(CGFloat) alpha &#123;</span><br><span class="line">    UIGraphicsBeginImageContextWithOptions(self.size, NO, 0.0f);</span><br><span class="line"></span><br><span class="line">    CGContextRef ctx = UIGraphicsGetCurrentContext();</span><br><span class="line">    CGRect area = CGRectMake(0, 0, self.size.width, self.size.height);</span><br><span class="line"></span><br><span class="line">    CGContextScaleCTM(ctx, 1, -1);</span><br><span class="line">    CGContextTranslateCTM(ctx, 0, -area.size.height);</span><br><span class="line"></span><br><span class="line">    CGContextSetBlendMode(ctx, kCGBlendModeMultiply);</span><br><span class="line"></span><br><span class="line">    CGContextSetAlpha(ctx, alpha);</span><br><span class="line"></span><br><span class="line">    CGContextDrawImage(ctx, area, self.CGImage);</span><br><span class="line"></span><br><span class="line">    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line"></span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return newImage;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 方法二、如果没有奇葩需求，干脆用UIImageView设置透明度</span><br><span class="line">UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageWithName:@&quot;yourImage&quot;]];</span><br><span class="line">imageView.alpha = 0.5;</span><br></pre></td></tr></table></figure>

<h3 id="33、Attempt-to-mutate-immutable-object-with-insertString-atIndex"><a href="#33、Attempt-to-mutate-immutable-object-with-insertString-atIndex" class="headerlink" title="33、Attempt to mutate immutable object with insertString:atIndex:"></a>33、Attempt to mutate immutable object with insertString:atIndex:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">这个错是因为你拿字符串调用insertString:atIndex:方法的时候，调用对象不是NSMutableString，应该先转成这个类型再调用</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="34、UIWebView添加单击手势不响应"><a href="#34、UIWebView添加单击手势不响应" class="headerlink" title="34、UIWebView添加单击手势不响应"></a>34、UIWebView添加单击手势不响应</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(webViewClick)];</span><br><span class="line">        tap.delegate = self;</span><br><span class="line">        [_webView addGestureRecognizer:tap];</span><br><span class="line"></span><br><span class="line">// 因为webView本身有一个单击手势，所以再添加会造成手势冲突，从而不响应。需要绑定手势代理，并实现下边的代理方法</span><br><span class="line">- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer&#123;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="35、获取手机RAM容量"><a href="#35、获取手机RAM容量" class="headerlink" title="35、获取手机RAM容量"></a>35、获取手机RAM容量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// 需要导入#import &lt;mach/mach.h&gt;</span><br><span class="line">mach_port_t host_port;</span><br><span class="line">    mach_msg_type_number_t host_size;</span><br><span class="line">    vm_size_t pagesize;</span><br><span class="line"></span><br><span class="line">    host_port = mach_host_self();</span><br><span class="line">    host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);</span><br><span class="line">    host_page_size(host_port, &amp;pagesize);</span><br><span class="line"></span><br><span class="line">    vm_statistics_data_t vm_stat;</span><br><span class="line"></span><br><span class="line">    if (host_statistics(host_port, HOST_VM_INFO, (host_info_t)&amp;vm_stat, &amp;host_size) != KERN_SUCCESS) &#123;</span><br><span class="line">        NSLog(@&quot;Failed to fetch vm statistics&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* Stats in bytes */</span><br><span class="line">    natural_t mem_used = (vm_stat.active_count +</span><br><span class="line">                          vm_stat.inactive_count +</span><br><span class="line">                          vm_stat.wire_count) * pagesize;</span><br><span class="line">    natural_t mem_free = vm_stat.free_count * pagesize;</span><br><span class="line">    natural_t mem_total = mem_used + mem_free;</span><br><span class="line">    NSLog(@&quot;已用: %u 可用: %u 总共: %u&quot;, mem_used, mem_free, mem_total);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="36、地图上两个点之间的实际距离"><a href="#36、地图上两个点之间的实际距离" class="headerlink" title="36、地图上两个点之间的实际距离"></a>36、地图上两个点之间的实际距离</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 需要导入#import &lt;CoreLocation/CoreLocation.h&gt;</span><br><span class="line">CLLocation *locA = [[CLLocation alloc] initWithLatitude:34 longitude:113];</span><br><span class="line">    CLLocation *locB = [[CLLocation alloc] initWithLatitude:31.05 longitude:121.76];</span><br><span class="line">// CLLocationDistance求出的单位为米</span><br><span class="line">    CLLocationDistance distance = [locA distanceFromLocation:locB];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="37、在应用中打开设置的某个界面"><a href="#37、在应用中打开设置的某个界面" class="headerlink" title="37、在应用中打开设置的某个界面"></a>37、在应用中打开设置的某个界面</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">// 打开设置-&gt;通用</span><br><span class="line">[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@&quot;prefs:root=General&quot;]];</span><br><span class="line"></span><br><span class="line">// 以下是设置其他界面</span><br><span class="line">prefs:root=General&amp;path=About</span><br><span class="line">prefs:root=General&amp;path=ACCESSIBILITY</span><br><span class="line">prefs:root=AIRPLANE_MODE</span><br><span class="line">prefs:root=General&amp;path=AUTOLOCK</span><br><span class="line">prefs:root=General&amp;path=USAGE/CELLULAR_USAGE</span><br><span class="line">prefs:root=Brightness</span><br><span class="line">prefs:root=Bluetooth</span><br><span class="line">prefs:root=General&amp;path=DATE_AND_TIME</span><br><span class="line">prefs:root=FACETIME</span><br><span class="line">prefs:root=General</span><br><span class="line">prefs:root=General&amp;path=Keyboard</span><br><span class="line">prefs:root=CASTLE</span><br><span class="line">prefs:root=CASTLE&amp;path=STORAGE_AND_BACKUP</span><br><span class="line">prefs:root=General&amp;path=INTERNATIONAL</span><br><span class="line">prefs:root=LOCATION_SERVICES</span><br><span class="line">prefs:root=ACCOUNT_SETTINGS</span><br><span class="line">prefs:root=MUSIC</span><br><span class="line">prefs:root=MUSIC&amp;path=EQ</span><br><span class="line">prefs:root=MUSIC&amp;path=VolumeLimit</span><br><span class="line">prefs:root=General&amp;path=Network</span><br><span class="line">prefs:root=NIKE_PLUS_IPOD</span><br><span class="line">prefs:root=NOTES</span><br><span class="line">prefs:root=NOTIFICATIONS_ID</span><br><span class="line">prefs:root=Phone</span><br><span class="line">prefs:root=Photos</span><br><span class="line">prefs:root=General&amp;path=ManagedConfigurationList</span><br><span class="line">prefs:root=General&amp;path=Reset</span><br><span class="line">prefs:root=Sounds&amp;path=Ringtone</span><br><span class="line">prefs:root=Safari</span><br><span class="line">prefs:root=General&amp;path=Assistant</span><br><span class="line">prefs:root=Sounds</span><br><span class="line">prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK</span><br><span class="line">prefs:root=STORE</span><br><span class="line">prefs:root=TWITTER</span><br><span class="line">prefs:root=FACEBOOK</span><br><span class="line">prefs:root=General&amp;path=USAGE prefs:root=VIDEO</span><br><span class="line">prefs:root=General&amp;path=Network/VPN</span><br><span class="line">prefs:root=Wallpaper</span><br><span class="line">prefs:root=WIFI</span><br><span class="line">prefs:root=INTERNET_TETHERING</span><br><span class="line">prefs:root=Phone&amp;path=Blocked</span><br><span class="line">prefs:root=DO_NOT_DISTURB</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="38、在UITextView中显示html文本"><a href="#38、在UITextView中显示html文本" class="headerlink" title="38、在UITextView中显示html文本"></a>38、在UITextView中显示html文本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(20, 30, 100, 199)];</span><br><span class="line">textView.backgroundColor = [UIColor redColor];</span><br><span class="line">[self.view addSubview:textView];</span><br><span class="line">NSString *htmlString = @&quot;&lt;h1&gt;Header&lt;/h1&gt;&lt;h2&gt;Subheader&lt;/h2&gt;&lt;p&gt;Some &lt;em&gt;text&lt;/em&gt;&lt;/p&gt;![](http://blogs.babble.com/famecrawler/files/2010/11/mickey_mouse-1097.jpg)&quot;;</span><br><span class="line">NSAttributedString *attributedString = [[NSAttributedString alloc] initWithData: [htmlString dataUsingEncoding:NSUnicodeStringEncoding] options: @&#123; NSDocumentTypeDocumentAttribute: NSHTMLTextDocumentType &#125; documentAttributes: nil error: nil];</span><br><span class="line">textView.attributedText = attributedString;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="39、监听scrollView是否滚动到了顶部／底部"><a href="#39、监听scrollView是否滚动到了顶部／底部" class="headerlink" title="39、监听scrollView是否滚动到了顶部／底部"></a>39、监听scrollView是否滚动到了顶部／底部</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">-(void)scrollViewDidScroll: (UIScrollView*)scrollView</span><br><span class="line">&#123;</span><br><span class="line">    float scrollViewHeight = scrollView.frame.size.height;</span><br><span class="line">    float scrollContentSizeHeight = scrollView.contentSize.height;</span><br><span class="line">    float scrollOffset = scrollView.contentOffset.y;</span><br><span class="line"></span><br><span class="line">    if (scrollOffset == 0)</span><br><span class="line">    &#123;</span><br><span class="line">        // 滚动到了顶部</span><br><span class="line">    &#125;</span><br><span class="line">    else if (scrollOffset + scrollViewHeight == scrollContentSizeHeight)</span><br><span class="line">    &#123;</span><br><span class="line">        // 滚动到了底部</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="40、UISlider增量／减量为固定值-假如为5"><a href="#40、UISlider增量／减量为固定值-假如为5" class="headerlink" title="40、UISlider增量／减量为固定值(假如为5)"></a>40、UISlider增量／减量为固定值(假如为5)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (void)setupSlider</span><br><span class="line">&#123;</span><br><span class="line">    UISlider *slider = [[UISlider alloc] init];</span><br><span class="line">    [self.view addSubview:slider];</span><br><span class="line">    [slider addTarget:self action:@selector(sliderAction:) forControlEvents:UIControlEventValueChanged];</span><br><span class="line">    slider.maximumValue = 100;</span><br><span class="line">    slider.minimumValue = 0;</span><br><span class="line">    slider.frame = CGRectMake(200, 20, 100, 30);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)sliderAction:(UISlider *)slider</span><br><span class="line">&#123;</span><br><span class="line">    [slider setValue:((int)((slider.value + 2.5) / 5) * 5) animated:NO];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="41、选中textField或者textView所有文本-我这里以textView为例"><a href="#41、选中textField或者textView所有文本-我这里以textView为例" class="headerlink" title="41、选中textField或者textView所有文本(我这里以textView为例)"></a>41、选中textField或者textView所有文本(我这里以textView为例)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[self.textView setSelectedTextRange:[self.textView textRangeFromPosition:self.textView.beginningOfDocument toPosition:self.textView.endOfDocument]]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="42、从导航控制器中删除某个控制器"><a href="#42、从导航控制器中删除某个控制器" class="headerlink" title="42、从导航控制器中删除某个控制器"></a>42、从导航控制器中删除某个控制器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// 方法一、知道这个控制器所处的导航控制器下标</span><br><span class="line">NSMutableArray *navigationArray = [[NSMutableArray alloc] initWithArray: self.navigationController.viewControllers];</span><br><span class="line">[navigationArray removeObjectAtIndex: 2]; </span><br><span class="line">self.navigationController.viewControllers = navigationArray;</span><br><span class="line"></span><br><span class="line">// 方法二、知道具体是哪个控制器</span><br><span class="line">NSArray* tempVCA = [self.navigationController viewControllers];</span><br><span class="line"></span><br><span class="line">for(UIViewController *tempVC in tempVCA)</span><br><span class="line">&#123;</span><br><span class="line">    if([tempVC isKindOfClass:[urViewControllerClass class]])</span><br><span class="line">    &#123;</span><br><span class="line">        [tempVC removeFromParentViewController];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="43、隐藏UITextView-UITextField光标"><a href="#43、隐藏UITextView-UITextField光标" class="headerlink" title="43、隐藏UITextView&#x2F;UITextField光标"></a>43、隐藏UITextView&#x2F;UITextField光标</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">textField.tintColor = [UIColor clearColor];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="44、当UITextView-UITextField中没有文字时，禁用回车键"><a href="#44、当UITextView-UITextField中没有文字时，禁用回车键" class="headerlink" title="44、当UITextView&#x2F;UITextField中没有文字时，禁用回车键"></a>44、当UITextView&#x2F;UITextField中没有文字时，禁用回车键</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">textField.enablesReturnKeyAutomatically = YES;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="45、字符串encode编码-编码url字符串不成功的问题"><a href="#45、字符串encode编码-编码url字符串不成功的问题" class="headerlink" title="45、字符串encode编码(编码url字符串不成功的问题)"></a>45、字符串encode编码(编码url字符串不成功的问题)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 我们一般用这个方法处理stringByAddingPercentEscapesUsingEncoding但是这个方法好想不会处理／和&amp;这种特殊符号，这种情况就需要用下边这个方法处理</span><br><span class="line">@implementation NSString (NSString_Extended)</span><br><span class="line">- (NSString *)urlencode &#123;</span><br><span class="line">    NSMutableString *output = [NSMutableString string];</span><br><span class="line">    const unsigned char *source = (const unsigned char *)[self UTF8String];</span><br><span class="line">    int sourceLen = strlen((const char *)source);</span><br><span class="line">    for (int i = 0; i &lt; sourceLen; ++i) &#123;</span><br><span class="line">        const unsigned char thisChar = source[i];</span><br><span class="line">        if (thisChar == &#x27; &#x27;)&#123;</span><br><span class="line">            [output appendString:@&quot;+&quot;];</span><br><span class="line">        &#125; else if (thisChar == &#x27;.&#x27; || thisChar == &#x27;-&#x27; || thisChar == &#x27;_&#x27; || thisChar == &#x27;~&#x27; || </span><br><span class="line">                   (thisChar &gt;= &#x27;a&#x27; &amp;&amp; thisChar &lt;= &#x27;z&#x27;) ||</span><br><span class="line">                   (thisChar &gt;= &#x27;A&#x27; &amp;&amp; thisChar &lt;= &#x27;Z&#x27;) ||</span><br><span class="line">                   (thisChar &gt;= &#x27;0&#x27; &amp;&amp; thisChar &lt;= &#x27;9&#x27;)) &#123;</span><br><span class="line">            [output appendFormat:@&quot;%c&quot;, thisChar];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            [output appendFormat:@&quot;%%%02X&quot;, thisChar];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return output;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="46、计算UILabel上某段文字的frame"><a href="#46、计算UILabel上某段文字的frame" class="headerlink" title="46、计算UILabel上某段文字的frame"></a>46、计算UILabel上某段文字的frame</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@implementation UILabel (TextRect)</span><br><span class="line"></span><br><span class="line">- (CGRect)boundingRectForCharacterRange:(NSRange)range</span><br><span class="line">&#123;</span><br><span class="line">    NSTextStorage *textStorage = [[NSTextStorage alloc] initWithAttributedString:[self attributedText]];</span><br><span class="line">    NSLayoutManager *layoutManager = [[NSLayoutManager alloc] init];</span><br><span class="line">    [textStorage addLayoutManager:layoutManager];</span><br><span class="line">    NSTextContainer *textContainer = [[NSTextContainer alloc] initWithSize:[self bounds].size];</span><br><span class="line">    textContainer.lineFragmentPadding = 0;</span><br><span class="line">    [layoutManager addTextContainer:textContainer];</span><br><span class="line">    NSRange glyphRange;</span><br><span class="line">    [layoutManager characterRangeForGlyphRange:range actualGlyphRange:&amp;glyphRange];</span><br><span class="line">    return [layoutManager boundingRectForGlyphRange:glyphRange inTextContainer:textContainer];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="47、获取随机UUID"><a href="#47、获取随机UUID" class="headerlink" title="47、获取随机UUID"></a>47、获取随机UUID</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">NSString *result;</span><br><span class="line">    if([[[UIDevice currentDevice] systemVersion] floatValue] &gt; 6.0)</span><br><span class="line">    &#123;</span><br><span class="line">       result = [[NSUUID UUID] UUIDString];</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        CFUUIDRef uuidRef = CFUUIDCreate(NULL);</span><br><span class="line">        CFStringRef uuid = CFUUIDCreateString(NULL, uuidRef);</span><br><span class="line">        CFRelease(uuidRef);</span><br><span class="line">        result = (__bridge_transfer NSString *)uuid;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="48、仿苹果抖动动画"><a href="#48、仿苹果抖动动画" class="headerlink" title="48、仿苹果抖动动画"></a>48、仿苹果抖动动画</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#define RADIANS(degrees) (((degrees) * M_PI) / 180.0)</span><br><span class="line"></span><br><span class="line">- (void)startAnimate &#123;</span><br><span class="line">    view.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(-5));</span><br><span class="line"></span><br><span class="line">    [UIView animateWithDuration:0.25 delay:0.0 options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse) animations:^ &#123;</span><br><span class="line">                         view.transform = CGAffineTransformRotate(CGAffineTransformIdentity, RADIANS(5));</span><br><span class="line">                     &#125; completion:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)stopAnimate &#123;</span><br><span class="line">    [UIView animateWithDuration:0.25 delay:0.0 options:(UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionBeginFromCurrentState | UIViewAnimationOptionCurveLinear) animations:^ &#123;</span><br><span class="line">                         view.transform = CGAffineTransformIdentity;</span><br><span class="line">                     &#125; completion:nil];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="49、修改UISearBar内部背景颜色"><a href="#49、修改UISearBar内部背景颜色" class="headerlink" title="49、修改UISearBar内部背景颜色"></a>49、修改UISearBar内部背景颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">UITextField *textField = [_searchBar valueForKey:@&quot;_searchField&quot;];</span><br><span class="line">textField.backgroundColor = [UIColor redColor];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="50、UITextView滚动到顶部"><a href="#50、UITextView滚动到顶部" class="headerlink" title="50、UITextView滚动到顶部"></a>50、UITextView滚动到顶部</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 方法一</span><br><span class="line">[self.textView scrollRangeToVisible:NSMakeRange(0, 0)];</span><br><span class="line">// 方法二</span><br><span class="line">[self.textView setContentOffset:CGPointZero animated:YES];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="51、通知监听APP生命周期"><a href="#51、通知监听APP生命周期" class="headerlink" title="51、通知监听APP生命周期"></a>51、通知监听APP生命周期</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">UIApplicationDidEnterBackgroundNotification 应用程序进入后台</span><br><span class="line">UIApplicationWillEnterForegroundNotification 应用程序将要进入前台</span><br><span class="line">UIApplicationDidFinishLaunchingNotification 应用程序完成启动</span><br><span class="line">UIApplicationDidFinishLaunchingNotification 应用程序由挂起变的活跃</span><br><span class="line">UIApplicationWillResignActiveNotification 应用程序挂起(有电话进来或者锁屏)</span><br><span class="line">UIApplicationDidReceiveMemoryWarningNotification 应用程序收到内存警告</span><br><span class="line">UIApplicationDidReceiveMemoryWarningNotification 应用程序终止(后台杀死、手机关机等)</span><br><span class="line">UIApplicationSignificantTimeChangeNotification 当有重大时间改变(凌晨0点，设备时间被修改，时区改变等)</span><br><span class="line">UIApplicationWillChangeStatusBarOrientationNotification 设备方向将要改变</span><br><span class="line">UIApplicationDidChangeStatusBarOrientationNotification 设备方向改变</span><br><span class="line">UIApplicationWillChangeStatusBarFrameNotification 设备状态栏frame将要改变</span><br><span class="line">UIApplicationDidChangeStatusBarFrameNotification 设备状态栏frame改变</span><br><span class="line">UIApplicationBackgroundRefreshStatusDidChangeNotification 应用程序在后台下载内容的状态发生变化</span><br><span class="line">UIApplicationProtectedDataWillBecomeUnavailable 本地受保护的文件被锁定,无法访问</span><br><span class="line">UIApplicationProtectedDataWillBecomeUnavailable 本地受保护的文件可用了</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="52、触摸事件类型"><a href="#52、触摸事件类型" class="headerlink" title="52、触摸事件类型"></a>52、触摸事件类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UIControlEventTouchCancel 取消控件当前触发的事件</span><br><span class="line">UIControlEventTouchDown 点按下去的事件</span><br><span class="line">UIControlEventTouchDownRepeat 重复的触动事件</span><br><span class="line">UIControlEventTouchDragEnter 手指被拖动到控件的边界的事件</span><br><span class="line">UIControlEventTouchDragExit 一个手指从控件内拖到外界的事件</span><br><span class="line">UIControlEventTouchDragInside 手指在控件的边界内拖动的事件</span><br><span class="line">UIControlEventTouchDragOutside 手指在控件边界之外被拖动的事件</span><br><span class="line">UIControlEventTouchUpInside 手指处于控制范围内的触摸事件</span><br><span class="line">UIControlEventTouchUpOutside 手指超出控制范围的控制中的触摸事件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="53、UITextField文字周围增加边距"><a href="#53、UITextField文字周围增加边距" class="headerlink" title="53、UITextField文字周围增加边距"></a>53、UITextField文字周围增加边距</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">    // 子类化UITextField，增加insert属性</span><br><span class="line">@interface WZBTextField : UITextField</span><br><span class="line">@property (nonatomic, assign) UIEdgeInsets insets;</span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// 在.m文件重写下列方法</span><br><span class="line">- (CGRect)textRectForBounds:(CGRect)bounds &#123;</span><br><span class="line">    CGRect paddedRect = UIEdgeInsetsInsetRect(bounds, self.insets);</span><br><span class="line">    if (self.rightViewMode == UITextFieldViewModeAlways || self.rightViewMode == UITextFieldViewModeUnlessEditing) &#123;</span><br><span class="line">        return [self adjustRectWithWidthRightView:paddedRect];</span><br><span class="line">    &#125;</span><br><span class="line">    return paddedRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (CGRect)placeholderRectForBounds:(CGRect)bounds &#123;</span><br><span class="line">    CGRect paddedRect = UIEdgeInsetsInsetRect(bounds, self.insets);</span><br><span class="line"></span><br><span class="line">    if (self.rightViewMode == UITextFieldViewModeAlways || self.rightViewMode == UITextFieldViewModeUnlessEditing) &#123;</span><br><span class="line">        return [self adjustRectWithWidthRightView:paddedRect];</span><br><span class="line">    &#125;</span><br><span class="line">    return paddedRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (CGRect)editingRectForBounds:(CGRect)bounds &#123;</span><br><span class="line">    CGRect paddedRect = UIEdgeInsetsInsetRect(bounds, self.insets);</span><br><span class="line">    if (self.rightViewMode == UITextFieldViewModeAlways || self.rightViewMode == UITextFieldViewModeWhileEditing) &#123;</span><br><span class="line">        return [self adjustRectWithWidthRightView:paddedRect];</span><br><span class="line">    &#125;</span><br><span class="line">    return paddedRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (CGRect)adjustRectWithWidthRightView:(CGRect)bounds &#123;</span><br><span class="line">    CGRect paddedRect = bounds;</span><br><span class="line">    paddedRect.size.width -= CGRectGetWidth(self.rightView.frame);</span><br><span class="line"></span><br><span class="line">    return paddedRect;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="54、监听UISlider拖动状态"><a href="#54、监听UISlider拖动状态" class="headerlink" title="54、监听UISlider拖动状态"></a>54、监听UISlider拖动状态</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 添加事件</span><br><span class="line">[slider addTarget:self action:@selector(sliderValurChanged:forEvent:) forControlEvents:UIControlEventValueChanged];</span><br><span class="line"></span><br><span class="line">// 实现方法</span><br><span class="line">- (void)sliderValurChanged:(UISlider*)slider forEvent:(UIEvent*)event &#123;</span><br><span class="line">    UITouch *touchEvent = [[event allTouches] anyObject];</span><br><span class="line">    switch (touchEvent.phase) &#123;</span><br><span class="line">        case UITouchPhaseBegan:</span><br><span class="line">            NSLog(@&quot;开始拖动&quot;);</span><br><span class="line">            break;</span><br><span class="line">        case UITouchPhaseMoved:</span><br><span class="line">            NSLog(@&quot;正在拖动&quot;);</span><br><span class="line">            break;</span><br><span class="line">        case UITouchPhaseEnded:</span><br><span class="line">            NSLog(@&quot;结束拖动&quot;);</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="55、设置UITextField光标位置"><a href="#55、设置UITextField光标位置" class="headerlink" title="55、设置UITextField光标位置"></a>55、设置UITextField光标位置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// textField需要设置的textField，index要设置的光标位置</span><br><span class="line">- (void)cursorLocation:(UITextField *)textField index:(NSInteger)index</span><br><span class="line">&#123;</span><br><span class="line">    NSRange range = NSMakeRange(index, 0);</span><br><span class="line">    UITextPosition *start = [textField positionFromPosition:[textField beginningOfDocument] offset:range.location];</span><br><span class="line">    UITextPosition *end = [textField positionFromPosition:start offset:range.length];</span><br><span class="line">    [textField setSelectedTextRange:[textField textRangeFromPosition:start toPosition:end]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="56、去除webView底部黑色"><a href="#56、去除webView底部黑色" class="headerlink" title="56、去除webView底部黑色"></a>56、去除webView底部黑色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[webView setBackgroundColor:[UIColor clearColor]];</span><br><span class="line">[webView setOpaque:NO];</span><br><span class="line"></span><br><span class="line">for (UIView *v1 in [webView subviews])</span><br><span class="line">&#123;</span><br><span class="line">    if ([v1 isKindOfClass:[UIScrollView class]])</span><br><span class="line">    &#123;</span><br><span class="line">        for (UIView *v2 in v1.subviews)</span><br><span class="line">        &#123;</span><br><span class="line">            if ([v2 isKindOfClass:[UIImageView class]])</span><br><span class="line">            &#123;</span><br><span class="line">                v2.hidden = YES;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="57、获取collectionViewCell在屏幕中的frame"><a href="#57、获取collectionViewCell在屏幕中的frame" class="headerlink" title="57、获取collectionViewCell在屏幕中的frame"></a>57、获取collectionViewCell在屏幕中的frame</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UICollectionViewLayoutAttributes *attributes = [collectionView layoutAttributesForItemAtIndexPath:indexPath];</span><br><span class="line">CGRect cellRect = attributes.frame;</span><br><span class="line">CGRect cellFrameInSuperview = [collectionView convertRect:cellRect toView:[cv superview]];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="58、比较两个UIImage是否相等"><a href="#58、比较两个UIImage是否相等" class="headerlink" title="58、比较两个UIImage是否相等"></a>58、比较两个UIImage是否相等</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)image:(UIImage *)image1 isEqualTo:(UIImage *)image2</span><br><span class="line">&#123;</span><br><span class="line">    NSData *data1 = UIImagePNGRepresentation(image1);</span><br><span class="line">    NSData *data2 = UIImagePNGRepresentation(image2);</span><br><span class="line"></span><br><span class="line">    return [data1 isEqual:data2];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="59、解决当UIScrollView上有UIButton的时候，触摸到button滑动不了的问题"><a href="#59、解决当UIScrollView上有UIButton的时候，触摸到button滑动不了的问题" class="headerlink" title="59、解决当UIScrollView上有UIButton的时候，触摸到button滑动不了的问题"></a>59、解决当UIScrollView上有UIButton的时候，触摸到button滑动不了的问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 子类化UIScrollView，并重写以下方法</span><br><span class="line">- (instancetype)initWithFrame:(CGRect)frame &#123;</span><br><span class="line">    if (self = [super initWithFrame:frame]) &#123;</span><br><span class="line">        self.delaysContentTouches = NO;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (BOOL)touchesShouldCancelInContentView:(UIView *)view &#123;</span><br><span class="line">    if ([view isKindOfClass:UIButton.class]) &#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return [super touchesShouldCancelInContentView:view];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="60、UITextView中的文字添加阴影效果"><a href="#60、UITextView中的文字添加阴影效果" class="headerlink" title="60、UITextView中的文字添加阴影效果"></a>60、UITextView中的文字添加阴影效果</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)setTextLayer:(UITextView *)textView color:(UIColor *)color</span><br><span class="line">&#123;</span><br><span class="line">    CALayer *textLayer = ((CALayer *)[textView.layer.sublayers objectAtIndex:0]);</span><br><span class="line">    textLayer.shadowColor = color.CGColor;</span><br><span class="line">    textLayer.shadowOffset = CGSizeMake(0.0f, 1.0f);</span><br><span class="line">    textLayer.shadowOpacity = 1.0f;</span><br><span class="line">    textLayer.shadowRadius = 1.0f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="61、MD5加密"><a href="#61、MD5加密" class="headerlink" title="61、MD5加密"></a>61、MD5加密</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)md5:(NSString *)str</span><br><span class="line">&#123;</span><br><span class="line">    const char *concat_str = [str UTF8String];</span><br><span class="line">    unsigned char result[CC_MD5_DIGEST_LENGTH];</span><br><span class="line">    CC_MD5(concat_str, (unsigned int)strlen(concat_str), result);</span><br><span class="line">    NSMutableString *hash = [NSMutableString string];</span><br><span class="line">    for (int i =0; i &lt;16; i++)&#123;</span><br><span class="line">        [hash appendFormat:@&quot;%02X&quot;, result[i]];</span><br><span class="line">    &#125;</span><br><span class="line">    return [hash uppercaseString];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="62、base64加密"><a href="#62、base64加密" class="headerlink" title="62、base64加密"></a>62、base64加密</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">@interface NSData (Base64)</span><br><span class="line">/**</span><br><span class="line"> *  @brief  字符串base64后转data</span><br><span class="line"> */</span><br><span class="line">+ (NSData *)dataWithBase64EncodedString:(NSString *)string</span><br><span class="line">&#123;</span><br><span class="line">    if (![string length]) return nil;</span><br><span class="line">    NSData *decoded = nil;</span><br><span class="line">#if __MAC_OS_X_VERSION_MIN_REQUIRED &lt; __MAC_10_9 || __IPHONE_OS_VERSION_MIN_REQUIRED &lt; __IPHONE_7_0</span><br><span class="line">    if (![NSData instancesRespondToSelector:@selector(initWithBase64EncodedString:options:)])</span><br><span class="line">    &#123;</span><br><span class="line">#pragma clang diagnostic push</span><br><span class="line">#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;</span><br><span class="line">        decoded = [[self alloc] initWithBase64Encoding:[string stringByReplacingOccurrencesOfString:@&quot;[^A-Za-z0-9+/=]&quot; withString:@&quot;&quot; options:NSRegularExpressionSearch range:NSMakeRange(0, [string length])]];</span><br><span class="line">#pragma clang diagnostic pop</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">#endif</span><br><span class="line">    &#123;</span><br><span class="line">        decoded = [[self alloc] initWithBase64EncodedString:string options:NSDataBase64DecodingIgnoreUnknownCharacters];</span><br><span class="line">    &#125;</span><br><span class="line">    return [decoded length]? decoded: nil;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> *  @brief  NSData转string</span><br><span class="line"> *  @param wrapWidth 换行长度  76  64</span><br><span class="line"> */</span><br><span class="line">- (NSString *)base64EncodedStringWithWrapWidth:(NSUInteger)wrapWidth</span><br><span class="line">&#123;</span><br><span class="line">    if (![self length]) return nil;</span><br><span class="line">    NSString *encoded = nil;</span><br><span class="line">#if __MAC_OS_X_VERSION_MIN_REQUIRED &lt; __MAC_10_9 || __IPHONE_OS_VERSION_MIN_REQUIRED &lt; __IPHONE_7_0</span><br><span class="line">    if (![NSData instancesRespondToSelector:@selector(base64EncodedStringWithOptions:)])</span><br><span class="line">    &#123;</span><br><span class="line">#pragma clang diagnostic push</span><br><span class="line">#pragma clang diagnostic ignored &quot;-Wdeprecated-declarations&quot;</span><br><span class="line">        encoded = [self base64Encoding];</span><br><span class="line">#pragma clang diagnostic pop</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">#endif</span><br><span class="line">    &#123;</span><br><span class="line">        switch (wrapWidth)</span><br><span class="line">        &#123;</span><br><span class="line">            case 64:</span><br><span class="line">            &#123;</span><br><span class="line">                return [self base64EncodedStringWithOptions:NSDataBase64Encoding64CharacterLineLength];</span><br><span class="line">            &#125;</span><br><span class="line">            case 76:</span><br><span class="line">            &#123;</span><br><span class="line">                return [self base64EncodedStringWithOptions:NSDataBase64Encoding76CharacterLineLength];</span><br><span class="line">            &#125;</span><br><span class="line">            default:</span><br><span class="line">            &#123;</span><br><span class="line">                encoded = [self base64EncodedStringWithOptions:(NSDataBase64EncodingOptions)0];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (!wrapWidth || wrapWidth &gt;= [encoded length])</span><br><span class="line">    &#123;</span><br><span class="line">        return encoded;</span><br><span class="line">    &#125;</span><br><span class="line">    wrapWidth = (wrapWidth / 4) * 4;</span><br><span class="line">    NSMutableString *result = [NSMutableString string];</span><br><span class="line">    for (NSUInteger i = 0; i &lt; [encoded length]; i+= wrapWidth)</span><br><span class="line">    &#123;</span><br><span class="line">        if (i + wrapWidth &gt;= [encoded length])</span><br><span class="line">        &#123;</span><br><span class="line">            [result appendString:[encoded substringFromIndex:i]];</span><br><span class="line">            break;</span><br><span class="line">        &#125;</span><br><span class="line">        [result appendString:[encoded substringWithRange:NSMakeRange(i, wrapWidth)]];</span><br><span class="line">        [result appendString:@&quot;\r\n&quot;];</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> *  @brief  NSData转string 换行长度默认64</span><br><span class="line"> */</span><br><span class="line">- (NSString *)base64EncodedString</span><br><span class="line">&#123;</span><br><span class="line">    return [self base64EncodedStringWithWrapWidth:0];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="63、AES加密"><a href="#63、AES加密" class="headerlink" title="63、AES加密"></a>63、AES加密</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;CommonCrypto/CommonCryptor.h&gt;</span><br><span class="line">@interface NSData (AES)</span><br><span class="line">/**</span><br><span class="line"> *  利用AES加密数据</span><br><span class="line"> */</span><br><span class="line">- (NSData*)encryptedWithAESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</span><br><span class="line"></span><br><span class="line">    NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line"></span><br><span class="line">    size_t dataMoved;</span><br><span class="line">    NSMutableData *encryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSizeAES128];</span><br><span class="line"></span><br><span class="line">    CCCryptorStatus status = CCCrypt(kCCEncrypt,kCCAlgorithmAES128,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,encryptedData.mutableBytes, encryptedData.length,&amp;dataMoved);</span><br><span class="line"></span><br><span class="line">    if (status == kCCSuccess) &#123;</span><br><span class="line">        encryptedData.length = dataMoved;</span><br><span class="line">        return encryptedData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return nil;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  @brief  利用AES解密据</span><br><span class="line"> */</span><br><span class="line">- (NSData*)decryptedWithAESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</span><br><span class="line"></span><br><span class="line">    NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line"></span><br><span class="line">    size_t dataMoved;</span><br><span class="line">    NSMutableData *decryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSizeAES128];</span><br><span class="line"></span><br><span class="line">    CCCryptorStatus result = CCCrypt(kCCDecrypt,kCCAlgorithmAES128,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,decryptedData.mutableBytes, decryptedData.length,&amp;dataMoved);</span><br><span class="line"></span><br><span class="line">    if (result == kCCSuccess) &#123;</span><br><span class="line">        decryptedData.length = dataMoved;</span><br><span class="line">        return decryptedData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return nil;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="64、3DES加密"><a href="#64、3DES加密" class="headerlink" title="64、3DES加密"></a>64、3DES加密</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;CommonCrypto/CommonCryptor.h&gt;</span><br><span class="line">@interface NSData (3DES)</span><br><span class="line">/**</span><br><span class="line"> *  利用3DES加密数据</span><br><span class="line"> */</span><br><span class="line">- (NSData*)encryptedWith3DESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</span><br><span class="line"></span><br><span class="line">    NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line"></span><br><span class="line">    size_t dataMoved;</span><br><span class="line">    NSMutableData *encryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSize3DES];</span><br><span class="line"></span><br><span class="line">    CCCryptorStatus result = CCCrypt(kCCEncrypt,kCCAlgorithm3DES,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,encryptedData.mutableBytes,encryptedData.length,&amp;dataMoved);</span><br><span class="line"></span><br><span class="line">    if (result == kCCSuccess) &#123;</span><br><span class="line">        encryptedData.length = dataMoved;</span><br><span class="line">        return encryptedData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return nil;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> *  @brief   利用3DES解密数据</span><br><span class="line"> */</span><br><span class="line">- (NSData*)decryptedWith3DESUsingKey:(NSString*)key andIV:(NSData*)iv &#123;</span><br><span class="line"></span><br><span class="line">    NSData *keyData = [key dataUsingEncoding:NSUTF8StringEncoding];</span><br><span class="line"></span><br><span class="line">    size_t dataMoved;</span><br><span class="line">    NSMutableData *decryptedData = [NSMutableData dataWithLength:self.length + kCCBlockSize3DES];</span><br><span class="line"></span><br><span class="line">    CCCryptorStatus result = CCCrypt(kCCDecrypt,kCCAlgorithm3DES,kCCOptionPKCS7Padding,keyData.bytes,keyData.length,iv.bytes,self.bytes,self.length,decryptedData.mutableBytes,decryptedData.length,&amp;dataMoved);</span><br><span class="line"></span><br><span class="line">    if (result == kCCSuccess) &#123;</span><br><span class="line">        decryptedData.length = dataMoved;</span><br><span class="line">        return decryptedData;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return nil;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="65、单个页面多个网络请求的情况，需要监听所有网络请求结束后刷新UI"><a href="#65、单个页面多个网络请求的情况，需要监听所有网络请求结束后刷新UI" class="headerlink" title="65、单个页面多个网络请求的情况，需要监听所有网络请求结束后刷新UI"></a>65、单个页面多个网络请求的情况，需要监听所有网络请求结束后刷新UI</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">dispatch_group_t group = dispatch_group_create();</span><br><span class="line">    dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.wzb.test.www&quot;, DISPATCH_QUEUE_SERIAL);</span><br><span class="line">    dispatch_group_enter(group);</span><br><span class="line">    dispatch_group_async(group, serialQueue, ^&#123;</span><br><span class="line">        // 网络请求一</span><br><span class="line">        [WebClick getDataSuccess:^(ResponseModel *model) &#123;</span><br><span class="line">            dispatch_group_leave(group);</span><br><span class="line">        &#125; failure:^(NSString *err) &#123;</span><br><span class="line">            dispatch_group_leave(group);</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_group_enter(group);</span><br><span class="line">    dispatch_group_async(group, serialQueue, ^&#123;</span><br><span class="line">        // 网络请求二</span><br><span class="line">        [WebClick getDataSuccess:getBigTypeRM onSuccess:^(ResponseModel *model) &#123;</span><br><span class="line">            dispatch_group_leave(group);</span><br><span class="line">        &#125;                                  failure:^(NSString *errorString) &#123;</span><br><span class="line">            dispatch_group_leave(group);</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_group_enter(group);</span><br><span class="line">    dispatch_group_async(group, serialQueue, ^&#123;</span><br><span class="line">        // 网络请求三</span><br><span class="line">        [WebClick getDataSuccess:^&#123;</span><br><span class="line">            dispatch_group_leave(group);</span><br><span class="line">        &#125; failure:^(NSString *errorString) &#123;</span><br><span class="line">            dispatch_group_leave(group);</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // 所有网络请求结束后会来到这个方法</span><br><span class="line">    dispatch_group_notify(group, serialQueue, ^&#123;</span><br><span class="line">        dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</span><br><span class="line">            dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                // 刷新UI</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="66、解决openUrl延时问题"><a href="#66、解决openUrl延时问题" class="headerlink" title="66、解决openUrl延时问题"></a>66、解决openUrl延时问题</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 方法一</span><br><span class="line">dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line"></span><br><span class="line">    UIApplication *application = [UIApplication sharedApplication];</span><br><span class="line">    if ([application respondsToSelector:@selector(openURL:options:completionHandler:)]) &#123;</span><br><span class="line">        [application openURL:URL options:@&#123;&#125;</span><br><span class="line">           completionHandler:nil];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        [application openURL:URL];</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">// 方法二</span><br><span class="line">[self performSelector:@selector(redirectToURL:) withObject:url afterDelay:0.1];</span><br><span class="line"></span><br><span class="line">- (void) redirectToURL</span><br><span class="line">&#123;</span><br><span class="line">UIApplication *application = [UIApplication sharedApplication];</span><br><span class="line">    if ([application respondsToSelector:@selector(openURL:options:completionHandler:)]) &#123;</span><br><span class="line">        [application openURL:URL options:@&#123;&#125;</span><br><span class="line">           completionHandler:nil];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        [application openURL:URL];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="67、页面跳转实现翻转动画"><a href="#67、页面跳转实现翻转动画" class="headerlink" title="67、页面跳转实现翻转动画"></a>67、页面跳转实现翻转动画</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// modal方式</span><br><span class="line">    TestViewController *vc = [[TestViewController alloc] init];</span><br><span class="line">    vc.view.backgroundColor = [UIColor redColor];</span><br><span class="line">    vc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;</span><br><span class="line">    [self presentViewController:vc animated:YES completion:nil];</span><br><span class="line"></span><br><span class="line">// push方式</span><br><span class="line">    TestViewController *vc = [[TestViewController alloc] init];</span><br><span class="line">    vc.view.backgroundColor = [UIColor redColor];</span><br><span class="line">    [UIView beginAnimations:@&quot;View Flip&quot; context:nil];</span><br><span class="line">    [UIView setAnimationDuration:0.80];</span><br><span class="line">    [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];</span><br><span class="line">    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];</span><br><span class="line">    [self.navigationController pushViewController:vc animated:YES];</span><br><span class="line">    [UIView commitAnimations];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="68、tableView实现无限滚动"><a href="#68、tableView实现无限滚动" class="headerlink" title="68、tableView实现无限滚动"></a>68、tableView实现无限滚动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (void)scrollViewDidScroll:(UIScrollView *)scrollView</span><br><span class="line">&#123;</span><br><span class="line">    CGFloat actualPosition = scrollView.contentOffset.y;</span><br><span class="line">    CGFloat contentHeight = scrollView.contentSize.height - scrollView.frame.size.height;</span><br><span class="line">    if (actualPosition &gt;= contentHeight) &#123;</span><br><span class="line">        [self.dataArr addObjectsFromArray:self.dataArr];</span><br><span class="line">        [self.tableView reloadData];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="69、代码方式调整屏幕亮度"><a href="#69、代码方式调整屏幕亮度" class="headerlink" title="69、代码方式调整屏幕亮度"></a>69、代码方式调整屏幕亮度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// brightness属性值在0-1之间，0代表最小亮度，1代表最大亮度</span><br><span class="line">[[UIScreen mainScreen] setBrightness:0.5];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="70、获取当前应用CUP用量"><a href="#70、获取当前应用CUP用量" class="headerlink" title="70、获取当前应用CUP用量"></a>70、获取当前应用CUP用量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">float cpu_usage()</span><br><span class="line">&#123;</span><br><span class="line">    kern_return_t kr;</span><br><span class="line">    task_info_data_t tinfo;</span><br><span class="line">    mach_msg_type_number_t task_info_count;</span><br><span class="line"></span><br><span class="line">    task_info_count = TASK_INFO_MAX;</span><br><span class="line">    kr = task_info(mach_task_self(), TASK_BASIC_INFO, (task_info_t)tinfo, &amp;task_info_count);</span><br><span class="line">    if (kr != KERN_SUCCESS) &#123;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    task_basic_info_t      basic_info;</span><br><span class="line">    thread_array_t         thread_list;</span><br><span class="line">    mach_msg_type_number_t thread_count;</span><br><span class="line"></span><br><span class="line">    thread_info_data_t     thinfo;</span><br><span class="line">    mach_msg_type_number_t thread_info_count;</span><br><span class="line"></span><br><span class="line">    thread_basic_info_t basic_info_th;</span><br><span class="line">    uint32_t stat_thread = 0; // Mach threads</span><br><span class="line"></span><br><span class="line">    basic_info = (task_basic_info_t)tinfo;</span><br><span class="line"></span><br><span class="line">    // get threads in the task</span><br><span class="line">    kr = task_threads(mach_task_self(), &amp;thread_list, &amp;thread_count);</span><br><span class="line">    if (kr != KERN_SUCCESS) &#123;</span><br><span class="line">        return -1;</span><br><span class="line">    &#125;</span><br><span class="line">    if (thread_count &gt; 0)</span><br><span class="line">        stat_thread += thread_count;</span><br><span class="line"></span><br><span class="line">    long tot_sec = 0;</span><br><span class="line">    long tot_usec = 0;</span><br><span class="line">    float tot_cpu = 0;</span><br><span class="line">    int j;</span><br><span class="line"></span><br><span class="line">    for (j = 0; j &lt; (int)thread_count; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        thread_info_count = THREAD_INFO_MAX;</span><br><span class="line">        kr = thread_info(thread_list[j], THREAD_BASIC_INFO,</span><br><span class="line">                         (thread_info_t)thinfo, &amp;thread_info_count);</span><br><span class="line">        if (kr != KERN_SUCCESS) &#123;</span><br><span class="line">            return -1;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        basic_info_th = (thread_basic_info_t)thinfo;</span><br><span class="line"></span><br><span class="line">        if (!(basic_info_th-&gt;flags &amp; TH_FLAGS_IDLE)) &#123;</span><br><span class="line">            tot_sec = tot_sec + basic_info_th-&gt;user_time.seconds + basic_info_th-&gt;system_time.seconds;</span><br><span class="line">            tot_usec = tot_usec + basic_info_th-&gt;user_time.microseconds + basic_info_th-&gt;system_time.microseconds;</span><br><span class="line">            tot_cpu = tot_cpu + basic_info_th-&gt;cpu_usage / (float)TH_USAGE_SCALE * 100.0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125; // for each thread</span><br><span class="line"></span><br><span class="line">    kr = vm_deallocate(mach_task_self(), (vm_offset_t)thread_list, thread_count * sizeof(thread_t));</span><br><span class="line">    assert(kr == KERN_SUCCESS);</span><br><span class="line"></span><br><span class="line">    return tot_cpu;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="71、float数据取整四舍五入"><a href="#71、float数据取整四舍五入" class="headerlink" title="71、float数据取整四舍五入"></a>71、float数据取整四舍五入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CGFloat f = 4.65;</span><br><span class="line">NSLog(@&quot;%d&quot;, (int)f);    // 打印结果4</span><br><span class="line"></span><br><span class="line">CGFloat f = 4.65;</span><br><span class="line">NSLog(@&quot;%d&quot;, (int)round(f));    // 打印结果5</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="72、删除UISearchBar系统默认边框"><a href="#72、删除UISearchBar系统默认边框" class="headerlink" title="72、删除UISearchBar系统默认边框"></a>72、删除UISearchBar系统默认边框</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 方法一</span><br><span class="line">searchBar.searchBarStyle = UISearchBarStyleMinimal;</span><br><span class="line"></span><br><span class="line">// 方法二</span><br><span class="line">[searchBar setBackgroundImage:[[UIImage alloc]init]];</span><br><span class="line"></span><br><span class="line">// 方法三</span><br><span class="line">searchBar.barTintColor = [UIColor whiteColor];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="73、为UICollectionViewCell设置圆角和阴影"><a href="#73、为UICollectionViewCell设置圆角和阴影" class="headerlink" title="73、为UICollectionViewCell设置圆角和阴影"></a>73、为UICollectionViewCell设置圆角和阴影</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">cell.contentView.layer.cornerRadius = 2.0f;</span><br><span class="line">cell.contentView.layer.borderWidth = 1.0f;</span><br><span class="line">cell.contentView.layer.borderColor = [UIColor clearColor].CGColor;</span><br><span class="line">cell.contentView.layer.masksToBounds = YES;</span><br><span class="line"></span><br><span class="line">cell.layer.shadowColor = [UIColor lightGrayColor].CGColor;</span><br><span class="line">cell.layer.shadowOffset = CGSizeMake(0, 2.0f);</span><br><span class="line">cell.layer.shadowRadius = 2.0f;</span><br><span class="line">cell.layer.shadowOpacity = 1.0f;</span><br><span class="line">cell.layer.masksToBounds = NO;</span><br><span class="line">cell.layer.shadowPath = [UIBezierPath bezierPathWithRoundedRect:cell.bounds cornerRadius:cell.contentView.layer.cornerRadius].CGPath;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="74、让正在滑动的scrollView停止滚动-不是禁止，而是暂时停止滚动"><a href="#74、让正在滑动的scrollView停止滚动-不是禁止，而是暂时停止滚动" class="headerlink" title="74、让正在滑动的scrollView停止滚动(不是禁止，而是暂时停止滚动)"></a>74、让正在滑动的scrollView停止滚动(不是禁止，而是暂时停止滚动)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[scrollView setContentOffset:scrollView.contentOffset animated:NO];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="75、使用xib设置UIView的边框、圆角"><a href="#75、使用xib设置UIView的边框、圆角" class="headerlink" title="75、使用xib设置UIView的边框、圆角"></a>75、使用xib设置UIView的边框、圆角</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">圆角和边框看下图即可设置</span><br><span class="line"></span><br><span class="line">xib设置圆角边框.png</span><br><span class="line">但是增加layer.borderColor的keyPath设置边框颜色并不能起作用，后来查了资料，这里应该用layer.borderUIColor，但是这里设置的颜色不起作用，无论设置什么颜色显示出来的都是黑色的。后来又去查了下，有种解决方案是给CALayer添加一个分类，提供一个 - (void)setBorderUIColor:(UIColor *)color;方法就可以解决了，实现如下：</span><br><span class="line"></span><br><span class="line">xib设置边框颜色.png</span><br><span class="line">#import &quot;CALayer+BorderColor.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation CALayer (BorderColor)</span><br><span class="line"></span><br><span class="line">- (void)setBorderUIColor:(UIColor *)color</span><br><span class="line">&#123;</span><br><span class="line">    self.borderColor = color.CGColor;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="76、根据经纬度获取城市等信息"><a href="#76、根据经纬度获取城市等信息" class="headerlink" title="76、根据经纬度获取城市等信息"></a>76、根据经纬度获取城市等信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">// 创建经纬度</span><br><span class="line">    CLLocation *location = [[CLLocation alloc] initWithLatitude:latitude longitude:longitude];</span><br><span class="line">    //创建一个译码器</span><br><span class="line">    CLGeocoder *cLGeocoder = [[CLGeocoder alloc] init];</span><br><span class="line">    [cLGeocoder reverseGeocodeLocation:userLocation completionHandler:^(NSArray *placemarks, NSError *error) &#123;</span><br><span class="line">        CLPlacemark *place = [placemarks objectAtIndex:0];</span><br><span class="line">        // 位置名</span><br><span class="line">    　　NSLog(@&quot;name,%@&quot;,place.name);</span><br><span class="line">    　　// 街道</span><br><span class="line">    　　NSLog(@&quot;thoroughfare,%@&quot;,place.thoroughfare);</span><br><span class="line">    　　// 子街道</span><br><span class="line">    　　NSLog(@&quot;subThoroughfare,%@&quot;,place.subThoroughfare);</span><br><span class="line">    　　// 市</span><br><span class="line">    　　NSLog(@&quot;locality,%@&quot;,place.locality);</span><br><span class="line">    　　// 区</span><br><span class="line">    　　NSLog(@&quot;subLocality,%@&quot;,place.subLocality); </span><br><span class="line">    　　// 国家</span><br><span class="line">    　　NSLog(@&quot;country,%@&quot;,place.country);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">/*  CLPlacemark中属性含义</span><br><span class="line">name                    地名</span><br><span class="line"></span><br><span class="line">thoroughfare            街道</span><br><span class="line"></span><br><span class="line">subThoroughfare        街道相关信息，例如门牌等</span><br><span class="line"></span><br><span class="line">locality                城市</span><br><span class="line"></span><br><span class="line">subLocality            城市相关信息，例如标志性建筑</span><br><span class="line"></span><br><span class="line">administrativeArea      直辖市</span><br><span class="line"></span><br><span class="line">subAdministrativeArea  其他行政区域信息（自治区等）</span><br><span class="line"></span><br><span class="line">postalCode              邮编</span><br><span class="line"></span><br><span class="line">ISOcountryCode          国家编码</span><br><span class="line"></span><br><span class="line">country                国家</span><br><span class="line"></span><br><span class="line">inlandWater            水源，湖泊</span><br><span class="line"></span><br><span class="line">ocean                  海洋</span><br><span class="line"></span><br><span class="line">areasOfInterest        关联的或利益相关的地标</span><br><span class="line">*/</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="77、如何防止添加多个NSNotification观察者？"><a href="#77、如何防止添加多个NSNotification观察者？" class="headerlink" title="77、如何防止添加多个NSNotification观察者？"></a>77、如何防止添加多个NSNotification观察者？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 解决方案就是添加观察者之前先移除下这个观察者</span><br><span class="line">[[NSNotificationCenter defaultCenter] removeObserver:observer name:name object:object];</span><br><span class="line">        [[NSNotificationCenter defaultCenter] addObserver:observer selector:selector name:name object:object];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="78、将一个xib添加到另外一个xib上"><a href="#78、将一个xib添加到另外一个xib上" class="headerlink" title="78、将一个xib添加到另外一个xib上"></a>78、将一个xib添加到另外一个xib上</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 假设你的自定义view名字为CustomView，你需要在CustomView.m中重写 `- (instancetype)initWithCoder:(NSCoder *)aDecoder` 方法，代码如下：</span><br><span class="line">- (instancetype)initWithCoder:(NSCoder *)aDecoder &#123;</span><br><span class="line">    if ((self = [super initWithCoder:aDecoder])) &#123;</span><br><span class="line">        [self addSubview:[[[NSBundle mainBundle] loadNibNamed:@&quot;CustomView&quot; owner:self options:nil] objectAtIndex:0]];</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">将一个xib添加到另外一个xib上.png</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="79、处理字符串，使其首字母大写"><a href="#79、处理字符串，使其首字母大写" class="headerlink" title="79、处理字符串，使其首字母大写"></a>79、处理字符串，使其首字母大写</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">NSString *str = @&quot;abcdefghijklmn&quot;;</span><br><span class="line">NSString *resultStr;</span><br><span class="line">if (str &amp;&amp; str.length &gt; 0) &#123;</span><br><span class="line">    resultStr = [str stringByReplacingCharactersInRange:NSMakeRange(0,1) withString:[[str substringToIndex:1] capitalizedString]];</span><br><span class="line">&#125;</span><br><span class="line">NSLog(@&quot;%@&quot;, resultStr);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="80、判断一个UIAlertView-UIAlertController是否显示"><a href="#80、判断一个UIAlertView-UIAlertController是否显示" class="headerlink" title="80、判断一个UIAlertView&#x2F;UIAlertController是否显示"></a>80、判断一个UIAlertView&#x2F;UIAlertController是否显示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// UIAlertView自带属性</span><br><span class="line">if (alert.visible)</span><br><span class="line">&#123;</span><br><span class="line">      NSLog(@&quot;显示了&quot;);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">      NSLog(@&quot;未显示&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// UIAlertController没有visible属性，需要自己判断，添加一个全局变量 BOOL visible</span><br><span class="line">UIAlertController *alertController = [UIAlertController alertControllerWithTitle:@&quot;Title&quot; message:@&quot;message&quot; preferredStyle:UIAlertControllerStyleAlert];</span><br><span class="line">    UIAlertAction *alertAction = [UIAlertAction actionWithTitle:@&quot;ActionTitle&quot; style:UIAlertActionStyleDefault handler:^(UIAlertAction * _Nonnull action) &#123;</span><br><span class="line">        self.visible = NO;</span><br><span class="line">    &#125;];</span><br><span class="line">    UIAlertAction *calcelAction = [UIAlertAction actionWithTitle:@&quot;calcelTitle&quot; style:UIAlertActionStyleCancel handler:^(UIAlertAction * _Nonnull action) &#123;</span><br><span class="line">        self.visible = NO;</span><br><span class="line">    &#125;];</span><br><span class="line">    [alertController addAction:alertAction];</span><br><span class="line">    [alertController addAction:calcelAction];</span><br><span class="line">    [self presentViewController:alertController animated:YES completion:^&#123;</span><br><span class="line">        self.visible = YES;</span><br><span class="line">    &#125;];</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="81、获取字符串中的数字"><a href="#81、获取字符串中的数字" class="headerlink" title="81、获取字符串中的数字"></a>81、获取字符串中的数字</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (NSString *)getNumberFromStr:(NSString *)str</span><br><span class="line">&#123;</span><br><span class="line">    NSCharacterSet *nonDigitCharacterSet = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];</span><br><span class="line">    return [[str componentsSeparatedByCharactersInSet:nonDigitCharacterSet] componentsJoinedByString:@&quot;&quot;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    NSLog(@&quot;%@&quot;, [self getNumberFromStr:@&quot;a0b0c1d2e3f4fda8fa8fad9fsad23&quot;]); // 00123488923</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="82、为UIView的某个方向添加边框"><a href="#82、为UIView的某个方向添加边框" class="headerlink" title="82、为UIView的某个方向添加边框"></a>82、为UIView的某个方向添加边框</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">// 添加UIView分类</span><br><span class="line"></span><br><span class="line">// UIView+WZB.h</span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 边框方向</span><br><span class="line"></span><br><span class="line"> - WZBBorderDirectionTop: 顶部</span><br><span class="line"> - WZBBorderDirectionLeft: 左边</span><br><span class="line"> - WZBBorderDirectionBottom: 底部</span><br><span class="line"> - WZBBorderDirectionRight: 右边</span><br><span class="line"> */</span><br><span class="line">typedef NS_ENUM(NSInteger, WZBBorderDirectionType) &#123;</span><br><span class="line">    WZBBorderDirectionTop = 0,</span><br><span class="line">    WZBBorderDirectionLeft,</span><br><span class="line">    WZBBorderDirectionBottom,</span><br><span class="line">    WZBBorderDirectionRight</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">@interface UIView (WZB)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> 为UIView的某个方向添加边框</span><br><span class="line"></span><br><span class="line"> @param direction 边框方向</span><br><span class="line"> @param color 边框颜色</span><br><span class="line"> @param width 边框宽度</span><br><span class="line"> */</span><br><span class="line">- (void)wzb_addBorder:(WZBBorderDirectionType)direction color:(UIColor *)color width:(CGFloat)width;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">// UIView+WZB.m</span><br><span class="line">#import &quot;UIView+WZB.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation UIView (WZB)</span><br><span class="line"></span><br><span class="line">- (void)wzb_addBorder:(WZBBorderDirectionType)direction color:(UIColor *)color width:(CGFloat)width</span><br><span class="line">&#123;</span><br><span class="line">    CALayer *border = [CALayer layer];</span><br><span class="line">    border.backgroundColor = color.CGColor;</span><br><span class="line">    switch (direction) &#123;</span><br><span class="line">        case WZBBorderDirectionTop:</span><br><span class="line">        &#123;</span><br><span class="line">            border.frame = CGRectMake(0.0f, 0.0f, self.bounds.size.width, width);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case WZBBorderDirectionLeft:</span><br><span class="line">        &#123;</span><br><span class="line">            border.frame = CGRectMake(0.0f, 0.0f, width, self.bounds.size.height);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case WZBBorderDirectionBottom:</span><br><span class="line">        &#123;</span><br><span class="line">            border.frame = CGRectMake(0.0f, self.bounds.size.height - width, self.bounds.size.width, width);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line">        case WZBBorderDirectionRight:</span><br><span class="line">        &#123;</span><br><span class="line">            border.frame = CGRectMake(self.bounds.size.width - width, 0, width, self.bounds.size.height);</span><br><span class="line">        &#125;</span><br><span class="line">            break;</span><br><span class="line"></span><br><span class="line">        default:</span><br><span class="line">            break;</span><br><span class="line">    &#125;</span><br><span class="line">    [self.layer addSublayer:border];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="83、通过属性设置UISwitch、UIProgressView等控件的宽高"><a href="#83、通过属性设置UISwitch、UIProgressView等控件的宽高" class="headerlink" title="83、通过属性设置UISwitch、UIProgressView等控件的宽高"></a>83、通过属性设置UISwitch、UIProgressView等控件的宽高</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mySwitch.transform = CGAffineTransformMakeScale(5.0f, 5.0f);</span><br><span class="line"></span><br><span class="line">progressView.transform = CGAffineTransformMakeScale(5.0f, 5.0f);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="84、自动搜索功能，用户连续输入的时候不搜索，用户停止输入的时候自动搜索-我这里设置的是0-5s，可根据需求更改"><a href="#84、自动搜索功能，用户连续输入的时候不搜索，用户停止输入的时候自动搜索-我这里设置的是0-5s，可根据需求更改" class="headerlink" title="84、自动搜索功能，用户连续输入的时候不搜索，用户停止输入的时候自动搜索(我这里设置的是0.5s，可根据需求更改)"></a>84、自动搜索功能，用户连续输入的时候不搜索，用户停止输入的时候自动搜索(我这里设置的是0.5s，可根据需求更改)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 输入框文字改变的时候调用</span><br><span class="line">-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText&#123;</span><br><span class="line">    // 先取消调用搜索方法</span><br><span class="line">    [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(searchNewResult) object:nil];</span><br><span class="line">    // 0.5秒后调用搜索方法</span><br><span class="line">    [self performSelector:@selector(searchNewResult) withObject:nil afterDelay:0.5];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="85、修改UISearchBar的占位文字颜色"><a href="#85、修改UISearchBar的占位文字颜色" class="headerlink" title="85、修改UISearchBar的占位文字颜色"></a>85、修改UISearchBar的占位文字颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 方法一（推荐使用）</span><br><span class="line">UITextField *searchField = [searchBar valueForKey:@&quot;_searchField&quot;];</span><br><span class="line">[searchField setValue:[UIColor blueColor] forKeyPath:@&quot;_placeholderLabel.textColor&quot;];</span><br><span class="line"></span><br><span class="line">// 方法二（已过期）</span><br><span class="line">[[UILabel appearanceWhenContainedIn:[UISearchBar class], nil] setTextColor:[UIColor redColor]];</span><br><span class="line"></span><br><span class="line">// 方法三（已过期）</span><br><span class="line">NSDictionary *placeholderAttributes = @&#123;NSForegroundColorAttributeName : [UIColor redColor], NSFontAttributeName : [UIFont fontWithName:@&quot;HelveticaNeue&quot; size:15],&#125;;</span><br><span class="line">NSAttributedString *attributedPlaceholder = [[NSAttributedString alloc] initWithString:searchBar.placeholder attributes:placeholderAttributes];</span><br><span class="line">[[UITextField appearanceWhenContainedIn:[UISearchBar class], nil] setAttributedPlaceholder:attributedPlaceholder];</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="86、某个界面多个事件同时响应引起的问题-比如，两个button同时按push到新界面，两个都会响应，可能导致push重叠"><a href="#86、某个界面多个事件同时响应引起的问题-比如，两个button同时按push到新界面，两个都会响应，可能导致push重叠" class="headerlink" title="86、某个界面多个事件同时响应引起的问题(比如，两个button同时按push到新界面，两个都会响应，可能导致push重叠)"></a>86、某个界面多个事件同时响应引起的问题(比如，两个button同时按push到新界面，两个都会响应，可能导致push重叠)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// UIView有个属性叫做exclusiveTouch，设置为YES后，其响应事件会和其他view互斥(有其他view事件响应的时候点击它不起作用)</span><br><span class="line">view.exclusiveTouch = YES;</span><br><span class="line"></span><br><span class="line">// 一个一个设置太麻烦了，可以全局设置</span><br><span class="line">[[UIView appearance] setExclusiveTouch:YES];</span><br><span class="line"></span><br><span class="line">// 或者只设置button</span><br><span class="line">[[UIButton appearance] setExclusiveTouch:YES];</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="87、修改tabBar的frame"><a href="#87、修改tabBar的frame" class="headerlink" title="87、修改tabBar的frame"></a>87、修改tabBar的frame</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 子类化UITabBarViewController，我这里以修改tabBar高度为例，重写viewWillLayoutSubviews方法</span><br><span class="line">#import &quot;WZBTabBarViewController.h&quot;</span><br><span class="line"></span><br><span class="line">@interface WZBTabBarViewController ()</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation WZBTabBarViewController</span><br><span class="line">- (void)viewWillLayoutSubviews &#123;</span><br><span class="line"></span><br><span class="line">    CGRect tabFrame = self.tabBar.frame;</span><br><span class="line">    tabFrame.size.height = 100;</span><br><span class="line">    tabFrame.origin.y = self.view.frame.size.height - 100;</span><br><span class="line">    self.tabBar.frame = tabFrame;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="88、修改键盘背景颜色"><a href="#88、修改键盘背景颜色" class="headerlink" title="88、修改键盘背景颜色"></a>88、修改键盘背景颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 设置某个键盘颜色</span><br><span class="line">    textField.keyboardAppearance = UIKeyboardAppearanceAlert;</span><br><span class="line"></span><br><span class="line">// 设置工程中所有键盘颜色</span><br><span class="line">[[UITextField appearance] setKeyboardAppearance:UIKeyboardAppearanceAlert];</span><br><span class="line">****</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="89、修改image颜色"><a href="#89、修改image颜色" class="headerlink" title="89、修改image颜色"></a>89、修改image颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">UIImage *image = [UIImage imageNamed:@&quot;test&quot;];</span><br><span class="line">    imageView.image = [image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];</span><br><span class="line">    CGRect rect = CGRectMake(0, 0, image.size.width, image.size.height);</span><br><span class="line">    UIGraphicsBeginImageContext(rect.size);</span><br><span class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</span><br><span class="line">    CGContextClipToMask(context, rect, image.CGImage);</span><br><span class="line">    CGContextSetFillColorWithColor(context, [[UIColor redColor] CGColor]);</span><br><span class="line">    CGContextFillRect(context, rect);</span><br><span class="line">    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    UIImage *flippedImage = [UIImage imageWithCGImage:img.CGImage scale:1.0 orientation: UIImageOrientationDownMirrored];</span><br><span class="line">    imageView.image = flippedImage;</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<h3 id="90、动画执行removeFromSuperview"><a href="#90、动画执行removeFromSuperview" class="headerlink" title="90、动画执行removeFromSuperview"></a>90、动画执行removeFromSuperview</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[UIView animateWithDuration:0.2</span><br><span class="line">                 animations:^&#123;</span><br><span class="line">                     view.alpha = 0.0f;</span><br><span class="line">                 &#125; completion:^(BOOL finished)&#123;</span><br><span class="line">                     [view removeFromSuperview];</span><br><span class="line">                 &#125;];</span><br><span class="line">                 </span><br></pre></td></tr></table></figure>
<h3 id="91、设置UIButton高亮背景颜色"><a href="#91、设置UIButton高亮背景颜色" class="headerlink" title="91、设置UIButton高亮背景颜色"></a>91、设置UIButton高亮背景颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[UIView animateWithDuration:0.2</span><br><span class="line">                 animations:^&#123;</span><br><span class="line">                     view.alpha = 0.0f;</span><br><span class="line">                 &#125; completion:^(BOOL finished)&#123;</span><br><span class="line">                     [view removeFromSuperview];</span><br><span class="line">                 &#125;];</span><br></pre></td></tr></table></figure>
<h3 id="92、设置UIButton高亮时的背景颜色"><a href="#92、设置UIButton高亮时的背景颜色" class="headerlink" title="92、设置UIButton高亮时的背景颜色"></a>92、设置UIButton高亮时的背景颜色</h3><h4 id="方法一、子类化UIButton，重写setHighlighted-方法，代码如下"><a href="#方法一、子类化UIButton，重写setHighlighted-方法，代码如下" class="headerlink" title="方法一、子类化UIButton，重写setHighlighted:方法，代码如下"></a>方法一、子类化UIButton，重写setHighlighted:方法，代码如下</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;WZBButton.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation WZBButton</span><br><span class="line"></span><br><span class="line">- (void)setHighlighted:(BOOL)highlighted &#123;</span><br><span class="line">    [super setHighlighted:highlighted];</span><br><span class="line"></span><br><span class="line">    UIColor *normalColor = [UIColor greenColor];</span><br><span class="line">    UIColor *highlightedColor = [UIColor redColor];</span><br><span class="line">    self.backgroundColor = highlighted ? highlightedColor : normalColor;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="方法二、利用setBackgroundImage-forState-方法"><a href="#方法二、利用setBackgroundImage-forState-方法" class="headerlink" title="方法二、利用setBackgroundImage:forState:方法"></a>方法二、利用setBackgroundImage:forState:方法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[button setBackgroundImage:[self imageWithColor:[UIColor blueColor]] forState:UIControlStateHighlighted];</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (UIImage *)imageWithColor:(UIColor *)color &#123;</span><br><span class="line">    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);</span><br><span class="line">    UIGraphicsBeginImageContext(rect.size);</span><br><span class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</span><br><span class="line"></span><br><span class="line">    CGContextSetFillColorWithColor(context, [color CGColor]);</span><br><span class="line">    CGContextFillRect(context, rect);</span><br><span class="line"></span><br><span class="line">    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="93、关于图片拉伸"><a href="#93、关于图片拉伸" class="headerlink" title="93、关于图片拉伸"></a>93、关于图片拉伸</h3><p>推荐看这个博客，讲的很详细<a target="_blank" rel="noopener" href="http://blog.csdn.net/q199109106q/article/details/8615661">http://blog.csdn.net/q199109106q/article/details/8615661</a></p>
<h3 id="94、利用runtime获取一个类所有属性"><a href="#94、利用runtime获取一个类所有属性" class="headerlink" title="94、利用runtime获取一个类所有属性"></a>94、利用runtime获取一个类所有属性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (NSArray *)allPropertyNames:(Class)aClass</span><br><span class="line">&#123;</span><br><span class="line">    unsigned count;</span><br><span class="line">    objc_property_t *properties = class_copyPropertyList(aClass, &amp;count);</span><br><span class="line"></span><br><span class="line">    NSMutableArray *rv = [NSMutableArray array];</span><br><span class="line"></span><br><span class="line">    unsigned i;</span><br><span class="line">    for (i = 0; i &lt; count; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        objc_property_t property = properties[i];</span><br><span class="line">        NSString *name = [NSString stringWithUTF8String:property_getName(property)];</span><br><span class="line">        [rv addObject:name];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    free(properties);</span><br><span class="line"></span><br><span class="line">    return rv;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="95、设置textView的某段文字变成其他颜色"><a href="#95、设置textView的某段文字变成其他颜色" class="headerlink" title="95、设置textView的某段文字变成其他颜色"></a>95、设置textView的某段文字变成其他颜色</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (void)setupTextView:(UITextView *)textView text:(NSString *)text color:(UIColor *)color &#123;</span><br><span class="line">    NSMutableAttributedString *string = [[NSMutableAttributedString alloc]initWithString:textView.text];</span><br><span class="line">    [string addAttribute:NSForegroundColorAttributeName value:color range:[textView.text rangeOfString:text]];</span><br><span class="line">    [textView setAttributedText:string];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="96、让push跳转动画像modal跳转动画那样效果-从下往上推上来"><a href="#96、让push跳转动画像modal跳转动画那样效果-从下往上推上来" class="headerlink" title="96、让push跳转动画像modal跳转动画那样效果(从下往上推上来)"></a>96、让push跳转动画像modal跳转动画那样效果(从下往上推上来)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (void)push</span><br><span class="line">&#123;</span><br><span class="line">TestViewController *vc = [[TestViewController alloc] init];</span><br><span class="line">    vc.view.backgroundColor = [UIColor redColor];</span><br><span class="line">    CATransition* transition = [CATransition animation];</span><br><span class="line">    transition.duration = 0.4f;</span><br><span class="line">    transition.type = kCATransitionMoveIn;</span><br><span class="line">    transition.subtype = kCATransitionFromTop;</span><br><span class="line">    [self.navigationController.view.layer addAnimation:transition forKey:kCATransition];</span><br><span class="line">    [self.navigationController pushViewController:vc animated:NO];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)pop</span><br><span class="line">&#123;</span><br><span class="line">CATransition* transition = [CATransition animation];</span><br><span class="line">    transition.duration = 0.4f;</span><br><span class="line">    transition.type = kCATransitionReveal;</span><br><span class="line">    transition.subtype = kCATransitionFromBottom;</span><br><span class="line">    [self.navigationController.view.layer addAnimation:transition forKey:kCATransition];</span><br><span class="line">    [self.navigationController popViewControllerAnimated:NO];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="97、上传图片太大，压缩图片"><a href="#97、上传图片太大，压缩图片" class="headerlink" title="97、上传图片太大，压缩图片"></a>97、上传图片太大，压缩图片</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">-(UIImage *)resizeImage:(UIImage *)image</span><br><span class="line">&#123;</span><br><span class="line">    float actualHeight = image.size.height;</span><br><span class="line">    float actualWidth = image.size.width;</span><br><span class="line">    float maxHeight = 300.0;</span><br><span class="line">    float maxWidth = 400.0;</span><br><span class="line">    float imgRatio = actualWidth/actualHeight;</span><br><span class="line">    float maxRatio = maxWidth/maxHeight;</span><br><span class="line">    float compressionQuality = 0.5;//50 percent compression</span><br><span class="line"></span><br><span class="line">    if (actualHeight &gt; maxHeight || actualWidth &gt; maxWidth)</span><br><span class="line">    &#123;</span><br><span class="line">        if(imgRatio &lt; maxRatio)</span><br><span class="line">        &#123;</span><br><span class="line">            //adjust width according to maxHeight</span><br><span class="line">            imgRatio = maxHeight / actualHeight;</span><br><span class="line">            actualWidth = imgRatio * actualWidth;</span><br><span class="line">            actualHeight = maxHeight;</span><br><span class="line">        &#125;</span><br><span class="line">        else if(imgRatio &gt; maxRatio)</span><br><span class="line">        &#123;</span><br><span class="line">            //adjust height according to maxWidth</span><br><span class="line">            imgRatio = maxWidth / actualWidth;</span><br><span class="line">            actualHeight = imgRatio * actualHeight;</span><br><span class="line">            actualWidth = maxWidth;</span><br><span class="line">        &#125;</span><br><span class="line">        else</span><br><span class="line">        &#123;</span><br><span class="line">            actualHeight = maxHeight;</span><br><span class="line">            actualWidth = maxWidth;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    CGRect rect = CGRectMake(0.0, 0.0, actualWidth, actualHeight);</span><br><span class="line">    UIGraphicsBeginImageContext(rect.size);</span><br><span class="line">    [image drawInRect:rect];</span><br><span class="line">    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();</span><br><span class="line">    NSData *imageData = UIImageJPEGRepresentation(img, compressionQuality);</span><br><span class="line">    UIGraphicsEndImageContext();</span><br><span class="line"></span><br><span class="line">    return [UIImage imageWithData:imageData];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>iOS开发经验总结(二)</p><p><a href="https://rzrobert.github.io/2017/07/11/iOS开发经验总结-二/">https://rzrobert.github.io/2017/07/11/iOS开发经验总结-二/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>robert</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2017-07-11</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2023-12-18</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E6%80%BB%E7%BB%93/">总结</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2017/09/14/React-Native-WebView-%E6%B5%8B%E9%87%8F%E7%BD%91%E9%A1%B5%E9%AB%98%E5%BA%A6/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">React-Native WebView 测量网页高度</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%B8%80/"><span class="level-item">iOS开发经验总结(一)</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Commentaires</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://rzrobert.github.io/2017/07/11/iOS%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%80%BB%E7%BB%93-%E4%BA%8C/';
            this.page.identifier = '2017/07/11/iOS开发经验总结-二/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'rzheng' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="任征"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">任征</p><p class="is-size-6 is-block">Flutter&amp;RN</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>北京</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Articles</p><a href="/archives"><p class="title">45</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Catégories</p><a href="/categories"><p class="title">8</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">12</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="mailto:470347041@@qq.com" target="_blank" rel="noopener">Suivre</a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Catégories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/JS/"><span class="level-start"><span class="level-item">JS</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/ReactNative/"><span class="level-start"><span class="level-item">ReactNative</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/iOS/"><span class="level-start"><span class="level-item">iOS</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/iOS%E4%B8%8ERN/"><span class="level-start"><span class="level-item">iOS与RN</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/iOS%E5%B0%8F%E7%89%87%E6%AE%B5/"><span class="level-start"><span class="level-item">iOS小片段</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/tools/"><span class="level-start"><span class="level-item">tools</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%AC%94%E8%AE%B0/"><span class="level-start"><span class="level-item">笔记</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Récents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-01-25T08:36:17.000Z">2024-01-25</time></p><p class="title"><a href="/2024/01/25/flutter%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">flutter混合开发踩坑记录</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-12-18T11:55:54.000Z">2023-12-18</time></p><p class="title"><a href="/2023/12/18/Flutter-%E5%90%84%E7%A7%8D%E5%88%97%E8%A1%A8%E6%9B%9D%E5%85%89%E6%96%B9%E6%A1%88/">Flutter 各种列表曝光方案</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-03-02T08:12:22.000Z">2023-03-02</time></p><p class="title"><a href="/2023/03/02/dart-%E5%AE%9E%E7%8E%B0%E5%8D%A1%E5%B0%94%E6%9B%BC%E6%BB%A4%E6%B3%A2/">dart 实现卡尔曼滤波</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-15T10:50:37.000Z">2023-02-15</time></p><p class="title"><a href="/2023/02/15/Flutter%E4%BA%8B%E4%BB%B6%E6%9C%BA%E5%88%B6/">Flutter事件机制</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-08T07:41:38.000Z">2023-02-08</time></p><p class="title"><a href="/2023/02/08/flutter-%E8%87%AA%E5%AE%9A%E4%B9%89flex%E7%BB%84%E4%BB%B6/">flutter 自定义flex组件</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2024/"><span class="level-start"><span class="level-item">2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/"><span class="level-start"><span class="level-item">2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/"><span class="level-start"><span class="level-item">2018</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/"><span class="level-start"><span class="level-item">2017</span></span><span class="level-end"><span class="level-item tag">23</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/H5/"><span class="tag">H5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JS/"><span class="tag">JS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Node-js/"><span class="tag">Node.js</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flutter/"><span class="tag">flutter</span><span class="tag">14</span></a></div><div class="control"><a class="tags has-addons" href="/tags/image/"><span class="tag">image</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/note/"><span class="tag">note</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/tools/"><span class="tag">tools</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%80%BB%E7%BB%93/"><span class="tag">总结</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8A%80%E6%9C%AF%E7%82%B9%E6%95%B4%E7%90%86/"><span class="tag">技术点整理</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tag">笔记</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%9A%E4%BF%A1/"><span class="tag">通信</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">任征的个人博客</a><p class="is-size-7"><span>&copy; 2024 robert</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/rzrobert"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-hans");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Retour au sommet" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "Ce site Web utilise des cookies pour améliorer votre expérience.",
          dismiss: "Je l'ai!",
          allow: "Autorise les cookies",
          deny: "Déclin",
          link: "Apprendre encore plus",
          policy: "Politique relative aux cookies",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Sans titre)","posts":"Articles","pages":"Pages","categories":"Catégories","tags":"Tags"});
        });</script></body></html>